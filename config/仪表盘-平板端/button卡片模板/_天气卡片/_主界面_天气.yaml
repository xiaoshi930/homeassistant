主界面_天气:
  triggers_update:
    - '[[[ return variables.entity ]]]'
    - '[[[ return variables.wendu_entity ?? "" ]]]'
    - '[[[ return variables.shidu_entity ?? "" ]]]'
  styles:
    grid:
      - grid-template-areas: |
          "天气点击" 
          "天气主图标" 
          "天气主温度" 
          "天气主信息" 
          "天气预警图标" 
          "天气星期" 
          "天气日期" 
          "天气最高温度" 
          "天气最高温度连接线" 
          "天气最低温度" 
          "天气最低温度连接线" 
          "天气降雨量" 
          "天气降雨量数值" 
          "天气状况图标" 
          "天气风力图标" 
          "天气风力等级" 
          "天气边框线" 
      - grid-template-columns: 100%
      - grid-template-rows: 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px
    card:
      - padding: 0 0 0 0
      - height: 300px
      - width: '[[[ return variables.width+"px"]]]'
      - border-radius: 0
      - background: transparent
  custom_fields:
    天气主图标:
      card:
        type: custom:button-card
        triggers_update:
          - '[[[ return variables.entity ]]]'
        show_entity_picture: true
        entity_picture: |
          [[[ 
              var sun = states['sun.sun'].state;
              var icon = states[variables.entity].attributes.condition_cn;
              if ( icon=='晴'   && sun == 'above_horizon') return "/local/UI/天气/图标/晴-白天.svg";
              if ( icon=='晴'   && sun == 'below_horizon') return "/local/UI/天气/图标/晴-夜晚.svg";
              if ( icon=='多云' && sun == 'above_horizon') return "/local/UI/天气/图标/多云-白天.svg";
              if ( icon=='多云' && sun == 'below_horizon') return "/local/UI/天气/图标/多云-夜晚.svg";
              else  return "/local/UI/天气/图标/"+icon+".svg";
          ]]] 
        styles:
          card:
            - width: 60px
            - height: 60px
            - margin-top: 35px
            - border-width: 0
            - background: transparent 
          entity_picture:
            - width: 100% 
    天气主温度:
      card:
        type: custom:button-card
        triggers_update:
          - '[[[ return variables.entity ]]]'
        show_label: true 
        label: |
          [[[
              if (!variables.wendu_entity){
                var wendu =states[variables.entity].attributes.temperature;
              }
              if(variables.wendu_entity){ 
                var wendu =states[variables.wendu_entity]?.state;
              }

              if (!variables.shidu_entity){
                var shidu =states[variables.entity].attributes.humidityy;
              }
              if(variables.shidu_entity){ 
                var shidu =states[variables.shidu_entity]?.state;
              }
              if ( wendu.toString().includes(".") != true) wendu = wendu + ".0";
              if ( shidu.toString().includes(".") != true) shidu = shidu + ".0";
              return wendu+'<font size="2.8px"><b> ℃&ensp;</b></font>' + shidu+'<font size="2.8px"><b> % </b></font>';
          ]]] 
        styles:  
          label: 
            - justify-self: start
            - font-size: 25px
            - color: rgb(255,255,255)
          card:
            - padding: 0
            - width: 300px
            - height: 40px 
            - margin-top: 20px 
            - margin-left: 75px
            - border-width: 0
            - background: transparent
    天气主信息:
      card:
        type: custom:button-card
        triggers_update:
          - '[[[ return variables.entity ]]]'
        show_label: true 
        label: | 
          [[[
              var tianqi  = states[variables.entity].attributes.condition_cn;
              var wind    = states[variables.entity].attributes.wind_speed;
              var category= states[variables.entity].attributes.aqi.category;     
              var aqi= states[variables.entity].attributes.aqi.aqi;   
              var level= states[variables.entity].attributes.aqi.level+"级";
              return tianqi +"   "+wind+" km/h" + "   " +category+" ("+level+aqi+")"; 
          ]]] 
        styles:
          label: 
            - width: 300px
            - text-align: left
            - font-size: 13px
            - color: rgb(240,240,240)
          card:
            - padding: 0
            - width: 300px
            - height: 40px 
            - margin-top: 65px 
            - margin-left: 75px
            - border-width: 0
            - background: transparent
    天气预警图标:
      card:
        type: custom:button-card
        show_label: true 
        label: |
          [[[
              var warning  = states[variables.entity]?.attributes?.warning ?? "";
              if (warning.length>0) return '<font size="2px"><b>⚠ </b></font>'+warning.length;
              else  return "";
          ]]]   
        styles: 
          label:  
            - font-size: 15px 
            - font-weight: bold
            - color:  |
                [[[
                    var warning  = states[variables.entity]?.attributes?.warning ?? "";
                    let level = "";
                    const priority = ["红色", "橙色", "黄色", "蓝色"];
                    for (let i=0;i<warning.length;i++){
                      const currentlevel = warning[i].level;
                      if (priority.indexOf(currentlevel) < priority.indexOf(level) || level == "") {
                          level = currentlevel;
                      }
                    }
                    if (level=="红色") return "rgb(255,50,50)";
                    if (level=="橙色") return "rgb(255,100,0)";
                    if (level=="黄色") return "rgb(255,200,0)";
                    if (level=="蓝色") return "rgb(50,150,200)";
                    else  return "";
                ]]] 
          card:
            - cursor: none
            - --mdc-ripple-press-opacity: 0
            - padding: 0
            - width: 40px
            - height: 40px 
            - margin-top: 20px 
            - margin-left: 215px
            - border-width: 0
            - background: rgb(0,0,0,0)

    天气星期:
      card:
        type: custom:button-card
        triggers_update:
          - '[[[ return variables.entity ]]]'
        styles:
          grid:
            - grid-template-areas: |
                "week1 week2 week3 week4 week5"
            - grid-template-columns: 20% 20% 20% 20% 20% 
            - grid-template-rows: 20px
          card:
            - padding: 0
            - margin-top: 120px 
            - border-width: 0
            - background: transparent
        custom_fields:
          week1:
            card:
              type: custom:button-card
              template: 天气星期样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 0
          week2:
            card:
              type: custom:button-card
              template: 天气星期样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 1
          week3:
            card:
              type: custom:button-card
              template: 天气星期样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 2
          week4:
            card:
              type: custom:button-card
              template: 天气星期样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 3
          week5:
            card:
              type: custom:button-card
              template: 天气星期样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 4
    天气日期:
      card:
        type: custom:button-card
        triggers_update:
          - '[[[ return variables.entity ]]]'
        styles:
          grid:
            - grid-template-areas: |
                "date1 date2 date3 date4 date5"
            - grid-template-columns: 20% 20% 20% 20% 20% 
            - grid-template-rows: 15px
          card:
            - padding: 0
            - margin-top: 150px 
            - border-width: 0
            - background: transparent
        custom_fields:
          date1:
            card:
              type: custom:button-card
              template: 天气日期样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 0
          date2:
            card:
              type: custom:button-card
              template: 天气日期样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 1
          date3:
            card:
              type: custom:button-card
              template: 天气日期样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 2
          date4:
            card:
              type: custom:button-card
              template: 天气日期样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 3
          date5:
            card:
              type: custom:button-card
              template: 天气日期样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 4
    天气风力图标:
      card:
        type: custom:button-card
        triggers_update:
          - '[[[ return variables.entity ]]]'
        styles:
          grid:
            - grid-template-areas: |
                "wind1 wind2 wind3 wind4 wind5"
            - grid-template-columns: 20% 20% 20% 20% 20% 
            - grid-template-rows: 15px
          card:
            - padding: 0
            - margin-top: 585px 
            - margin-left: -17px
            - border-width: 0
            - background: transparent
        custom_fields:
          wind1:
            card:
              type: custom:button-card
              template: 天气风力图标样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 0
          wind2:
            card:
              type: custom:button-card
              template: 天气风力图标样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 1
          wind3:
            card:
              type: custom:button-card
              template: 天气风力图标样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 2
          wind4:
            card:
              type: custom:button-card
              template: 天气风力图标样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 3
          wind5:
            card:
              type: custom:button-card
              template: 天气风力图标样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 4
    天气风力等级:
      card:
        type: custom:button-card
        triggers_update:
          - '[[[ return variables.entity ]]]'
        styles:
          grid:
            - grid-template-areas: |
                "wind1 wind2 wind3 wind4 wind5"
            - grid-template-columns: 20% 20% 20% 20% 20%
            - grid-template-rows: 15px
          card:
            - padding: 0
            - margin-top: 585px 
            - margin-left: 3px
            - border-width: 0
            - background: transparent
        custom_fields:
          wind1:
            card:
              type: custom:button-card
              template: 天气风力等级样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 0
          wind2:
            card:
              type: custom:button-card
              template: 天气风力等级样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 1
          wind3:
            card:
              type: custom:button-card
              template: 天气风力等级样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 2
          wind4:
            card:
              type: custom:button-card
              template: 天气风力等级样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 3
          wind5:
            card:
              type: custom:button-card
              template: 天气风力等级样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 4
    天气状况图标:
      card:
        type: custom:button-card
        triggers_update:
          - '[[[ return variables.entity ]]]'
        styles:
          grid:
            - grid-template-areas: |
                "icon1 icon2 icon3 icon4 icon5"
            - grid-template-columns: 20% 20% 20% 20% 20% 
            - grid-template-rows: 30px
          card:
            - padding: 0
            - margin-top: 550px 
            - margin-left: 0 
            - border-width: 0
            - background: transparent
        custom_fields:
          icon1:
            card:
              type: custom:button-card
              template: 天气状况图标样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 0
          icon2:
            card:
              type: custom:button-card
              template: 天气状况图标样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 1
          icon3:
            card:
              type: custom:button-card
              template: 天气状况图标样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 2
          icon4:
            card:
              type: custom:button-card
              template: 天气状况图标样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 3
          icon5:
            card:
              type: custom:button-card
              template: 天气状况图标样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                weizhi: 4
    天气降雨量:
      card:
        type: custom:button-card
        triggers_update:
          - '[[[ return variables.entity ]]]'
        styles:
          grid:
            - grid-template-areas: |
                "rain1 rain2 rain3 rain4 rain5"
            - grid-template-columns: 20% 20% 20% 20% 20%
            - grid-template-rows: 165px
          card:
            - padding: 0
            - margin-top: 340px 
            - margin-left: 1px
            - border-width: 0
            - background: transparent
        custom_fields:
          rain1:
            card:
              type: custom:button-card
              template: 天气降雨量样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                weizhi: 0
          rain2:
            card:
              type: custom:button-card
              template: 天气降雨量样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                weizhi: 1
          rain3:
            card:
              type: custom:button-card
              template: 天气降雨量样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                weizhi: 2
          rain4:
            card:
              type: custom:button-card
              template: 天气降雨量样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                weizhi: 3
          rain5:
            card:
              type: custom:button-card
              template: 天气降雨量样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                weizhi: 4
    天气边框线:
      card:
        type: custom:button-card
        triggers_update:
          - '[[[ return variables.entity ]]]'
        styles:
          grid:
            - grid-template-areas: |
                "icon1 icon2 icon3 icon4 icon5"
            - grid-template-columns: 20% 20% 20% 20% 20%
            - grid-template-rows: 165px
          card:
            - padding: 0 0 0 0 
            - border-radius: 0
            - margin-top: 340px 
            - border-width: 0
            - background: transparent
        custom_fields:
          icon1:
            card:
              type: custom:button-card
              template: 天气边框线样式模板
          icon2:
            card:
              type: custom:button-card
              template: 天气边框线样式模板
          icon3:
            card:
              type: custom:button-card
              template: 天气边框线样式模板
          icon4:
            card:
              type: custom:button-card
              template: 天气边框线样式模板
          icon5:
            card:
              type: custom:button-card
              template: 天气边框线样式模板
              styles:
                card:
                  - border-right: 1.5px solid;
    天气降雨量数值:
      card:
        type: custom:button-card
        triggers_update:
          - '[[[ return variables.entity ]]]'
        styles:
          grid:
            - grid-template-areas: |
                "rain1 rain2 rain3 rain4 rain5"
            - grid-template-columns: 20% 20% 20% 20% 20%
            - grid-template-rows: 18px
          card:
            - padding: 0
            - margin-top: 505px 
            - margin-left: 0
            - border-width: 0
            - background: transparent
        custom_fields:
          rain1:
            card:
              type: custom:button-card
              template: 天气降雨量数值样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                rain_border: '[[[return variables.rain_border ]]]'
                weizhi: 0
          rain2:
            card:
              type: custom:button-card
              template: 天气降雨量数值样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                rain_border: '[[[return variables.rain_border ]]]'
                weizhi: 1
          rain3:
            card:
              type: custom:button-card
              template: 天气降雨量数值样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                rain_border: '[[[return variables.rain_border ]]]'
                weizhi: 2
          rain4:
            card:
              type: custom:button-card
              template: 天气降雨量数值样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                rain_border: '[[[return variables.rain_border ]]]'
                weizhi: 3
          rain5:
            card:
              type: custom:button-card
              template: 天气降雨量数值样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                rain_border: '[[[return variables.rain_border ]]]'
                weizhi: 4
    天气最高温度连接线:
      card:
        type: custom:button-card
        triggers_update:
          - '[[[ return variables.entity ]]]'
        styles:
          grid:
            - grid-template-areas: |
                "top1 top2 top3 top4 top5"
            - grid-template-columns: 20% 20% 20% 20% 20%
            - grid-template-rows: 300px
          card:
            - padding: 0
            - margin-top: 195px 
            - margin-left: 20px 
            - border-width: 0
            - background: transparent
        custom_fields:
          top1:
            card:
              type: custom:button-card
              template: 天气温度连接线样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                weizhi: t0
          top2:
            card:
              type: custom:button-card
              template: 天气温度连接线样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                weizhi: t1
          top3:
            card:
              type: custom:button-card
              template: 天气温度连接线样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                weizhi: t2
          top4:
            card:
              type: custom:button-card
              template: 天气温度连接线样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                weizhi: t3
          top5:
            card:
              type: custom:button-card
              template: 天气温度连接线样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                weizhi: t4
    天气最低温度连接线:
      card:
        type: custom:button-card
        triggers_update:
          - '[[[ return variables.entity ]]]'
        styles:
          grid:
            - grid-template-areas: |
                "down1 down2 down3 down4 down5"
            - grid-template-columns: 20% 20% 20% 20% 20%
            - grid-template-rows: 300px
          card:
            - padding: 0
            - margin-top: 195px 
            - margin-left: 25px 
            - border-width: 0
            - background: transparent
        custom_fields:
          down1:
            card:
              type: custom:button-card
              template: 天气温度连接线样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                weizhi: d0
          down2:
            card:
              type: custom:button-card
              template: 天气温度连接线样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                weizhi: d1
          down3:
            card:
              type: custom:button-card
              template: 天气温度连接线样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                weizhi: d2
          down4:
            card:
              type: custom:button-card
              template: 天气温度连接线样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                weizhi: d3
          down5:
            card:
              type: custom:button-card
              template: 天气温度连接线样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                weizhi: d4
    天气最高温度:
      card:
        type: custom:button-card
        triggers_update:
          - '[[[ return variables.entity ]]]'
        styles:
          grid:
            - grid-template-areas: |
                "top1 top2 top3 top4 top5"
            - grid-template-columns: 20% 20% 20% 20% 20%
            - grid-template-rows: 300px
          card:
            - padding: 0
            - margin-top: 195px 
            - border-width: 0
            - background: transparent
        custom_fields:
          top1:
            card:
              type: custom:button-card
              template: 天气最高温度样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                wendu_border: '[[[return variables.wendu_border ]]]'
                weizhi: 0
          top2:
            card:
              type: custom:button-card
              template: 天气最高温度样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                wendu_border: '[[[return variables.wendu_border ]]]'
                weizhi: 1
          top3:
            card:
              type: custom:button-card
              template: 天气最高温度样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                wendu_border: '[[[return variables.wendu_border ]]]'
                weizhi: 2
          top4:
            card:
              type: custom:button-card
              template: 天气最高温度样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                wendu_border: '[[[return variables.wendu_border ]]]'
                weizhi: 3
          top5:
            card:
              type: custom:button-card
              template: 天气最高温度样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                wendu_border: '[[[return variables.wendu_border ]]]'
                weizhi: 4
    天气最低温度:
      card:
        type: custom:button-card
        triggers_update:
          - '[[[ return variables.entity ]]]'
        styles:
          grid:
            - grid-template-areas: |
                "down1 down2 down3 down4 down5"
            - grid-template-columns: 20% 20% 20% 20% 20%
            - grid-template-rows: 300px
          card:
            - padding: 0
            - margin-top: 195px 
            - border-width: 0
            - background: transparent
        custom_fields:
          down1:
            card:
              type: custom:button-card
              template: 天气最低温度样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                wendu_border: '[[[return variables.wendu_border ]]]'
                weizhi: 0
          down2:
            card:
              type: custom:button-card
              template: 天气最低温度样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                wendu_border: '[[[return variables.wendu_border ]]]'
                weizhi: 1
          down3:
            card:
              type: custom:button-card
              template: 天气最低温度样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                wendu_border: '[[[return variables.wendu_border ]]]'
                weizhi: 2
          down4:
            card:
              type: custom:button-card
              template: 天气最低温度样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                wendu_border: '[[[return variables.wendu_border ]]]'
                weizhi: 3
          down5:
            card:
              type: custom:button-card
              template: 天气最低温度样式模板
              variables:
                entity: '[[[return variables.entity]]]' 
                width: '[[[return variables.width]]]' 
                wendu_border: '[[[return variables.wendu_border ]]]'
                weizhi: 4
    天气点击:
      card:
        type: custom:button-card
        triggers_update:
          - '[[[ return variables.entity ]]]'
        entity: '[[[return variables.entity]]]' 
        show_icon: false
        show_name: false  
        show_state: false
        styles: 
          card: 
            - background: rgb(0,0,0,0)
            - margin-top: 300px
            - height: 300px 
        tap_action: 
          action: fire-dom-event 
          browser_mod:
            service: browser_mod.popup
            data:
              style: '[[[ return theme_none(970)]]]'
              content:
                type: custom:button-card
                template: 主界面_小时天气
                variables:                      
                  entity: '[[[ return variables.entity ]]]'

天气星期样式模板:
  triggers_update:
    - '[[[ return variables.entity ]]]'
  show_label: true
  label: |
    [[[
        var date = states[variables.entity].attributes.daily_forecast[variables.weizhi].datetime;
        var year = date.slice(0,4);
        var mon =  date.slice(5,7)-1;
        var day =  date.slice(8,10);
        var date = new Date(year, mon, day);
        var week_id = date.getDay();
        var weeks = new Array("周日", "周一", "周二", "周三", "周四", "周五", "周六");
        var week =  weeks[week_id];
        return week; 
    ]]] 
  styles:
    card:
      - border-width: 0
      - background: transparent
    label:
      - font-size: 13px
      - color: rgb(255,255,255)
天气日期样式模板:
  triggers_update:
    - '[[[ return variables.entity ]]]'
  show_label: true
  label: |
    [[[
        var date = states[variables.entity].attributes.daily_forecast[variables.weizhi].datetime;
        return  date.slice(5,7)+"月"+date.slice(8,10)+"日";
    ]]]
  styles:
    card:
      - border-width: 0
      - background: transparent
    label:
      - font-size: 9px
      - color: rgb(255,255,255)
天气状况图标样式模板: 
  triggers_update:
    - '[[[ return variables.entity ]]]'
  show_entity_picture: true
  entity_picture: |
    [[[ 
        var icon = states[variables.entity].attributes.daily_forecast[variables.weizhi].text;
        return "/local/UI/天气/图标/"+icon+".svg";
    ]]]
  styles:
    card:
      - border-width: 0
      - background: transparent
    entity_picture:
      - width: 30px
天气风力图标样式模板:
  triggers_update:
    - '[[[ return variables.entity ]]]'
  show_label: true
  label: ➤
  styles:
    card:
      - border-width: 0
      - background: transparent
      - transform: |
          [[[ 
              var wind = states[variables.entity].attributes.daily_forecast[variables.weizhi].wind_bearing-90;
              return "rotate("+wind+"deg)" 
          ]]]
    label:
      - margin-left: 0
      - font-size: 10px
      - color: rgb(255,255,255)
天气风力等级样式模板:
  triggers_update:
    - '[[[ return variables.entity ]]]'
  show_label: true
  label: |
    [[[ 
        var wind = states[variables.entity].attributes.daily_forecast[variables.weizhi].native_wind_speed;
        return wind + "级"; 
    ]]]
  styles:
    card:
      - border-width: 0
      - background: transparent
    label:
      - margin-left: 0
      - font-size: 10px
      - color: rgb(255,255,255)
天气边框线样式模板:
  triggers_update:
    - '[[[ return variables.entity ]]]'
  styles:  
    card:
      - padding: 0 0 0 0
      - height: 165px
      - border-radius: 0
      - border-top: 0px solid;
      - border-right: 0px solid;
      - border-bottom: 1.5px solid;
      - border-left: 1.5px solid;  
      - background: transparent
      - border-image: "linear-gradient(0deg, rgb(0,191,255) , rgb(255,165,0)) 1"
天气最高温度样式模板:
  triggers_update:
    - '[[[ return variables.entity ]]]'
  show_label: true
  label: |
    [[[
        var wendu = states[variables.entity].attributes.daily_forecast[variables.weizhi].native_temperature*1;
        return wendu +"°";
    ]]]
  styles: 
    label:
      - font-size: 13px
      - color: rgb(255,255,255)
    card:
      - width: '[[[ return variables.width/5-18+"px"]]]'
      - height: 18px
      - border-radius: '[[[return variables.wendu_border]]]'
      - background: rgb(0,0,0)
      - border: 2px solid rgb(255,165,0)
      - margin-left: 9px
      - margin-top: |
          [[[      
              var t0 = states[variables.entity].attributes.daily_forecast[0].native_temperature*1; 
              var t1 = states[variables.entity].attributes.daily_forecast[1].native_temperature*1;
              var t2 = states[variables.entity].attributes.daily_forecast[2].native_temperature*1;
              var t3 = states[variables.entity].attributes.daily_forecast[3].native_temperature*1;
              var t4 = states[variables.entity].attributes.daily_forecast[4].native_temperature*1;
              var d0 = states[variables.entity].attributes.daily_forecast[0].native_temp_low*1;
              var d1 = states[variables.entity].attributes.daily_forecast[1].native_temp_low*1;
              var d2 = states[variables.entity].attributes.daily_forecast[2].native_temp_low*1;
              var d3 = states[variables.entity].attributes.daily_forecast[3].native_temp_low*1;
              var d4 = states[variables.entity].attributes.daily_forecast[4].native_temp_low*1;
              var tm = Math.max(t0,t1,t2,t3,t4);
              var max = Math.max(t0,t1,t2,t3,t4,d0,d1,d2,d3,d4);
              var min = Math.min(t0,t1,t2,t3,t4,d0,d1,d2,d3,d4);
              var range = 250/(max-min);  
              if (variables.weizhi=='0' )  return  range*(tm-t0) + "px";
              if (variables.weizhi=='1' )  return  range*(tm-t1) + "px";
              if (variables.weizhi=='2' )  return  range*(tm-t2) + "px";
              if (variables.weizhi=='3' )  return  range*(tm-t3) + "px";
              if (variables.weizhi=='4' )  return  range*(tm-t4) + "px";
          ]]]
天气最低温度样式模板:
  triggers_update:
    - '[[[ return variables.entity ]]]'
  show_label: true
  label: |
    [[[
        var wendu = states[variables.entity].attributes.daily_forecast[variables.weizhi].native_temp_low*1;
        return wendu +"°";
    ]]]
  styles: 
    label:
      - font-size: 13px
      - color: rgb(255,255,255)
    card:
      - width: '[[[ return variables.width/5-18+"px"]]]' 
      - height: 18px
      - border-radius: '[[[return variables.wendu_border]]]'
      - background: rgb(0,0,0)
      - border: 2px solid rgb(0,191,255)
      - margin-left: 9px
      - margin-top: |
          [[[      
              var t0 = states[variables.entity].attributes.daily_forecast[0].native_temperature*1; 
              var t1 = states[variables.entity].attributes.daily_forecast[1].native_temperature*1;
              var t2 = states[variables.entity].attributes.daily_forecast[2].native_temperature*1;
              var t3 = states[variables.entity].attributes.daily_forecast[3].native_temperature*1;
              var t4 = states[variables.entity].attributes.daily_forecast[4].native_temperature*1;
              var d0 = states[variables.entity].attributes.daily_forecast[0].native_temp_low*1;
              var d1 = states[variables.entity].attributes.daily_forecast[1].native_temp_low*1;
              var d2 = states[variables.entity].attributes.daily_forecast[2].native_temp_low*1;
              var d3 = states[variables.entity].attributes.daily_forecast[3].native_temp_low*1;
              var d4 = states[variables.entity].attributes.daily_forecast[4].native_temp_low*1;
              var dm = Math.min(d0,d1,d2,d3,d4);
              var max = Math.max(t0,t1,t2,t3,t4,d0,d1,d2,d3,d4);
              var min = Math.min(t0,t1,t2,t3,t4,d0,d1,d2,d3,d4);
              var range = 250/(max-min);  
              if (variables.weizhi=='0' )  return  250-range*(d0-dm) + "px";
              if (variables.weizhi=='1' )  return  250-range*(d1-dm) + "px";
              if (variables.weizhi=='2' )  return  250-range*(d2-dm) + "px";
              if (variables.weizhi=='3' )  return  250-range*(d3-dm) + "px";
              if (variables.weizhi=='4' )  return  250-range*(d4-dm) + "px";
          ]]]
天气温度连接线样式模板:      
  triggers_update:
    - '[[[ return variables.entity ]]]'
  styles: 
    card:
      - padding: 0 0 0 0
      - border-radius: 0
      - width: '[[[ return variables.width/5+"px"]]]'
      - height: | 
          [[[ 
              var t0 = states[variables.entity].attributes.daily_forecast[0].native_temperature*1; 
              var t1 = states[variables.entity].attributes.daily_forecast[1].native_temperature*1;
              var t2 = states[variables.entity].attributes.daily_forecast[2].native_temperature*1;
              var t3 = states[variables.entity].attributes.daily_forecast[3].native_temperature*1;
              var t4 = states[variables.entity].attributes.daily_forecast[4].native_temperature*1;
              var d0 = states[variables.entity].attributes.daily_forecast[0].native_temp_low*1;
              var d1 = states[variables.entity].attributes.daily_forecast[1].native_temp_low*1;
              var d2 = states[variables.entity].attributes.daily_forecast[2].native_temp_low*1;
              var d3 = states[variables.entity].attributes.daily_forecast[3].native_temp_low*1;
              var d4 = states[variables.entity].attributes.daily_forecast[4].native_temp_low*1;
              var max = Math.max(t0,t1,t2,t3,t4,d0,d1,d2,d3,d4);
              var min = Math.min(t0,t1,t2,t3,t4,d0,d1,d2,d3,d4);
              var range = 125/(max-min);          
              if (variables.weizhi=='t0' && t0==t1 ) return '2px';
              if (variables.weizhi=='t1' && t1==t2 ) return '2px';
              if (variables.weizhi=='t2' && t2==t3 ) return '2px';
              if (variables.weizhi=='t3' && t3==t4 ) return '2px';
              if (variables.weizhi=='t0' && t0!=t1 ) return range * Math.abs(t0-t1) + "px";
              if (variables.weizhi=='t1' && t1!=t2 ) return range * Math.abs(t1-t2) + "px";
              if (variables.weizhi=='t2' && t2!=t3 ) return range * Math.abs(t2-t3) + "px";
              if (variables.weizhi=='t3' && t3!=t4 ) return range * Math.abs(t3-t4) + "px";
              if (variables.weizhi=='d0' && d0==d1 ) return '2px';
              if (variables.weizhi=='d1' && d1==d2 ) return '2px';
              if (variables.weizhi=='d2' && d2==d3 ) return '2px';
              if (variables.weizhi=='d3' && d3==d4 ) return '2px';
              if (variables.weizhi=='d0' && d0!=d1 ) return range * Math.abs(d0-d1) + "px";
              if (variables.weizhi=='d1' && d1!=d2 ) return range * Math.abs(d1-d2) + "px";
              if (variables.weizhi=='d2' && d2!=d3 ) return range * Math.abs(d2-d3) + "px";
              if (variables.weizhi=='d3' && d3!=d4 ) return range * Math.abs(d3-d4) + "px";
          ]]]  
      - background: |
          [[[
              var t0 = states[variables.entity].attributes.daily_forecast[0].native_temperature*1; 
              var t1 = states[variables.entity].attributes.daily_forecast[1].native_temperature*1;
              var t2 = states[variables.entity].attributes.daily_forecast[2].native_temperature*1;
              var t3 = states[variables.entity].attributes.daily_forecast[3].native_temperature*1;
              var t4 = states[variables.entity].attributes.daily_forecast[4].native_temperature*1;
              var d0 = states[variables.entity].attributes.daily_forecast[0].native_temp_low*1;
              var d1 = states[variables.entity].attributes.daily_forecast[1].native_temp_low*1;
              var d2 = states[variables.entity].attributes.daily_forecast[2].native_temp_low*1;
              var d3 = states[variables.entity].attributes.daily_forecast[3].native_temp_low*1;
              var d4 = states[variables.entity].attributes.daily_forecast[4].native_temp_low*1;
              if ((variables.weizhi=='t0' && t0==t1 )||
                  (variables.weizhi=='t1' && t1==t2 )||
                  (variables.weizhi=='t2' && t2==t3 )||
                  (variables.weizhi=='t3' && t3==t4 ))  
                  return 'rgb(255,165,0)';  
              if ((variables.weizhi=='t0' && t0>t1 )||
                  (variables.weizhi=='t1' && t1>t2 )||
                  (variables.weizhi=='t2' && t2>t3 )||
                  (variables.weizhi=='t3' && t3>t4 ))
                  return 'linear-gradient(to bottom left, transparent calc(50% - 1px), rgb(255,165,0) 0, rgb(255,165,0) calc(50% + 1px), transparent 0)';
              if ((variables.weizhi=='t0' && t0<t1 )||
                  (variables.weizhi=='t1' && t1<t2 )||
                  (variables.weizhi=='t2' && t2<t3 )||
                  (variables.weizhi=='t3' && t3<t4 ))
                  return 'linear-gradient(to bottom right, transparent calc(50% - 1px), rgb(255,165,0) 0, rgb(255,165,0) calc(50% + 1px), transparent 0)';

              if ((variables.weizhi=='d0' && d0==d1 )||
                  (variables.weizhi=='d1' && d1==d2 )||
                  (variables.weizhi=='d2' && d2==d3 )||
                  (variables.weizhi=='d3' && d3==d4 )) 
                  return 'rgb(0,255,255)';  
              if ((variables.weizhi=='d0' && d0>d1 )||
                  (variables.weizhi=='d1' && d1>d2 )||
                  (variables.weizhi=='d2' && d2>d3 )||
                  (variables.weizhi=='d3' && d3>d4 ))
                  return 'linear-gradient(to bottom left, transparent calc(50% - 1px), rgb(0,191,255) 0, rgb(0,191,255) calc(50% + 1px), transparent 0)';
              if ((variables.weizhi=='d0' && d0<d1 )||
                  (variables.weizhi=='d1' && d1<d2 )||
                  (variables.weizhi=='d2' && d2<d3 )||
                  (variables.weizhi=='d3' && d3<d4 ))
                  return 'linear-gradient(to bottom right, transparent calc(50% - 1px), rgb(0,191,255) 0, rgb(0,191,255) calc(50% + 1px), transparent 0)';
          ]]]  
      - margin-top: |
          [[[      
              var t0 = states[variables.entity].attributes.daily_forecast[0].native_temperature*1; 
              var t1 = states[variables.entity].attributes.daily_forecast[1].native_temperature*1;
              var t2 = states[variables.entity].attributes.daily_forecast[2].native_temperature*1;
              var t3 = states[variables.entity].attributes.daily_forecast[3].native_temperature*1;
              var t4 = states[variables.entity].attributes.daily_forecast[4].native_temperature*1;
              var d0 = states[variables.entity].attributes.daily_forecast[0].native_temp_low*1;
              var d1 = states[variables.entity].attributes.daily_forecast[1].native_temp_low*1;
              var d2 = states[variables.entity].attributes.daily_forecast[2].native_temp_low*1;
              var d3 = states[variables.entity].attributes.daily_forecast[3].native_temp_low*1;
              var d4 = states[variables.entity].attributes.daily_forecast[4].native_temp_low*1;
              var tm = Math.max(t0,t1,t2,t3,t4);
              var dm = Math.min(d0,d1,d2,d3,d4);
              var max = Math.max(t0,t1,t2,t3,t4,d0,d1,d2,d3,d4);
              var min = Math.min(t0,t1,t2,t3,t4,d0,d1,d2,d3,d4);
              var range = 125/(max-min);     
              if (variables.weizhi=='t0' )  return  range*(2*tm-t1-t0)+ "px";
              if (variables.weizhi=='t1' )  return  range*(2*tm-t2-t1)+ "px";
              if (variables.weizhi=='t2' )  return  range*(2*tm-t3-t2)+ "px";
              if (variables.weizhi=='t3' )  return  range*(2*tm-t4-t3)+ "px";
              if (variables.weizhi=='d0' )  return  250+range*(2*dm-d1-d0)+ "px";
              if (variables.weizhi=='d1' )  return  250+range*(2*dm-d2-d1)+ "px";
              if (variables.weizhi=='d2' )  return  250+range*(2*dm-d3-d2)+ "px";
              if (variables.weizhi=='d3' )  return  250+range*(2*dm-d4-d3)+ "px";
          ]]]
天气降雨量数值样式模板:
  triggers_update:
    - '[[[ return variables.entity ]]]'
  show_label: true
  label: |
    [[[
        var rain = states[variables.entity].attributes.daily_forecast[variables.weizhi].native_precipitation;
        if (rain>0) return  rain+"mm";    
      ]]]
  styles:
    label:
      - font-size: 10px
      - color: |
          [[[  
              var rain = states[variables.entity].attributes.daily_forecast[variables.weizhi].native_precipitation;
              if ( rain>0 ) return 'rgb(255,255,255)';
              if ( rain==0) return 'transparent'; 
          ]]]  
    card:
      - border-radius: '[[[return variables.rain_border]]]'
      - margin-left: 4px
      - width: '[[[ return variables.width/5-8+"px"]]]'
      - height: 16px
      - background: |
          [[[  
              var rain = states[variables.entity].attributes.daily_forecast[variables.weizhi].native_precipitation;
              if ( rain>0 ) return 'rgb(0,0,0)';
              if ( rain==0) return 'transparent'; 
          ]]]   
      - border: |
          [[[  
              var rain = states[variables.entity].attributes.daily_forecast[variables.weizhi].native_precipitation;
              if ( rain>0)  return  '1.5px solid rgb(0,255,255)';
              else return '0px solid'; 
          ]]]  
天气降雨量样式模板: 
  triggers_update:
    - '[[[ return variables.entity ]]]'
  styles: 
    card:
      - padding: 0 0 0 0
      - border-radius: 0
      - border-width: 0
      - width: '[[[ return variables.width/5+"px"]]]'
      - margin-top: |
          [[[  
              var rain = states[variables.entity].attributes.daily_forecast[variables.weizhi].native_precipitation;
              if (rain >=0 && rain <= 20)  return 165-rain*8.25+'px'; 
              if (rain >20 ) return '0'; 
          ]]]  
      - height: |
          [[[  
              var rain = states[variables.entity].attributes.daily_forecast[variables.weizhi].native_precipitation;
              if (rain >=0 && rain <= 20)  return rain*8.25+'px'; 
              if (rain >20 ) return '165px'; 
          ]]]  
      - background: |
          [[[  
              var rain = states[variables.entity].attributes.daily_forecast[variables.weizhi].native_precipitation;
              if ( rain>0 ) return 'rgb(0,255,255)';
              if ( rain==0) return 'transparent'; 
          ]]]    
