action: fire-dom-event
browser_mod:
  service: browser_mod.popup
  data:
    style:  '[[[ return theme_bubble(1024); ]]]' #括号内1024为弹出菜单的宽度
    content:
      type: horizontal-stack
      cards:
        - type: vertical-stack
          cards:
            - type: custom:bubble-card
              card_type: separator
              name: "主卧room"
              sub_button:
                - entity: sensor.wendu_zhuwo
                  show_state: true
                  show_background: false
                  show_icon: true
                - entity: sensor.shidu_zhuwo
                  show_state: true
                  state_background: false
                  show_background: false
              styles: |-
                ha-card {
                  color: white !important;
                }
                .bubble-sub-button{
                  color: white !important;
                }
            - type: custom:bubble-card
              card_type: climate
              entity: climate.kongtiao_zhuwo
              sub_button:
                - entity: climate.kongtiao_zhuwo
                  select_attribute: hvac_modes
                  show_arrow: false
              card_layout: large
              scrolling_effect: true
              show_icon: true
              force_icon: false
              show_state: true
              show_last_changed: false
              show_attribute: false
              state_color: true
            - type: custom:bubble-card
              card_type: climate
              entity: climate.shuinuantan
              sub_button:
                - name: HVAC modes menu
                  select_attribute: hvac_modes
                  state_background: false
                  show_arrow: false
              card_layout: large
              force_icon: false
              show_state: true
              state_color: true
            - type: custom:bubble-card
              card_type: button
              entity: fan.jinghuaqi_zhuwo
              show_state: true
              show_attribute: false
              attribute: supported_features
              tap_action:
                action: toggle
              button_action:
                tap_action:
                  action: toggle
              sub_button:
                - entity: sensor.jinghuaqi_zhuwo_pm25
                  show_icon: false
                  show_background: false
                  show_state: true
                - entity: select.jinghuaqi_zhuwo
                  show_icon: false
                  show_background: true
                  show_state: true
              card_layout: large
              styles: |-
                ha-card {
                  --bubble-select-list-item-accent-color: ${state === 'on' ? 'rgb(50,205,50)' : ''} ;
                }
                .bubble-button-background {
                  background-color: ${state === 'on' ? 'rgb(50,205,50)' : ''} ;
                }
                .bubble-icon {
                  color: ${state === 'on' ? 'rgb(50,205,50)' : ''} !important;
                }
            - type: custom:bubble-card
              card_type: button
              entity: humidifier.jiashiqi_zhuwo
              card_layout: large
              tap_action:
                action: toggle
              button_action:
                tap_action:
                  action: toggle
              sub_button:
                - entity: humidifier.jiashiqi_zhuwo
                  show_attribute: true
                  attribute: current_humidity
                  show_background: false
                  show_icon: false
                - entity: select.jiashiqi_zhuwo
                  show_state: true
                  state_background: true
                  show_arrow: true
              show_state: true
              show_attribute: false
              icon: mdi:air-humidifier
              styles: |-
                ha-card {
                  --bubble-select-list-item-accent-color: ${state === 'on' ? 'rgb(30,144,255)' : ''} ;
                }
                .bubble-button-background {
                  background-color: ${state === 'on' ? 'rgb(30,144,255)' : ''} ;
                }
                .bubble-icon {
                  color: ${state === 'on' ? 'rgb(30,144,255)' : ''} !important;
                }
            - type: custom:bubble-card
              card_type: separator
              name: ""
            - type: custom:bubble-card
              card_type: separator
              name: 客厅room
              sub_button:
                - entity: sensor.wendu_keting
                  show_state: true
                  show_background: false
                  show_icon: true
                - entity: sensor.shidu_keting
                  show_state: true
                  state_background: false
                  show_background: false
              styles: |-
                ha-card {
                  color: white !important;
                }
                .bubble-sub-button{
                  color: white !important;
                }
            - type: custom:bubble-card
              card_type: button
              entity: switch.diannao
              show_state: true
              show_attribute: false
              attribute: supported_features
              tap_action:
                action: toggle
              button_action:
                tap_action:
                  action: toggle
              sub_button:
                - entity: sensor.pc_cpu_usage
                  show_state: true
                  state_background: false
                  show_background: false
                  show_icon: false
                  show_name: true
                  name: cpu
                - entity: sensor.pc_memory_usage
                  show_state: true
                  show_name: true
                  show_icon: false
                  state_background: true
                  name: 内存
                  show_background: false
                - entity: sensor.pc_storage_c_usage
                  show_last_changed: false
                  show_state: true
                  show_icon: false
                  state_background: false
                  show_name: true
                  show_background: false
                  name: C盘
                - entity: sensor.pc_storage_d_usage
                  show_name: true
                  show_icon: false
                  show_background: false
                  show_state: true
                  name: D盘
                - entity: sensor.pc_storage_e_usage
                  name: E盘
                  show_name: true
                  show_state: true
                  state_background: false
                  show_background: false
                  show_icon: false
                - entity: sensor.pc_storage_f_usage
                  name: F盘
                  show_state: true
                  show_name: true
                  show_background: false
                  show_icon: false
              card_layout: large-2-rows
              styles: |-
                ha-card {
                  --bubble-select-list-item-accent-color: ${state === 'on' ? 'rgb(33,150,243)' : ''} ;
                }
                .bubble-button-background {
                  background-color: ${state === 'on' ? 'rgb(33,150,243)' : ''} ;
                }
                .bubble-icon {
                  color: ${state === 'on' ? 'rgb(33,150,243)' : ''} !important;
                }
              icon: mdi:laptop
              name: ""
              force_icon: false
            - type: custom:bubble-card
              card_type: climate
              entity: climate.kongtiao_keting
              sub_button:
                - entity: climate.kongtiao_keting
                  select_attribute: hvac_modes
                  show_arrow: false
              card_layout: large
              scrolling_effect: true
              show_icon: true
              force_icon: false
              show_state: true
              show_last_changed: false
              show_attribute: false
              state_color: true
            - type: custom:bubble-card
              card_type: button
              entity: humidifier.jiashiqi_keting
              card_layout: large
              tap_action:
                action: toggle
              button_action:
                tap_action:
                  action: toggle
              sub_button:
                - entity: humidifier.jiashiqi_keting
                  show_attribute: true
                  attribute: current_humidity
                  show_background: false
                  show_icon: false
                - entity: select.jiashiqi_keting
                  show_state: true
                  state_background: true
                  show_arrow: true
              show_state: true
              show_attribute: false
              icon: mdi:air-humidifier
              styles: |-
                ha-card {
                  --bubble-select-list-item-accent-color: ${state === 'on' ? 'rgb(30,144,255)' : ''} ;
                }
                .bubble-button-background {
                  background-color: ${state === 'on' ? 'rgb(30,144,255)' : ''} ;
                }
                .bubble-icon {
                  color: ${state === 'on' ? 'rgb(30,144,255)' : ''} !important;
                }
            - type: custom:bubble-card
              card_type: button
              entity: fan.jinghuaqi_keting
              show_state: true
              show_attribute: false
              attribute: supported_features
              tap_action:
                action: toggle
              button_action:
                tap_action:
                  action: toggle
              sub_button:
                - entity: sensor.jinghuaqi_keting_pm25
                  show_icon: false
                  show_background: false
                  show_state: true
                - entity: select.jinghuaqi_keting
                  show_icon: false
                  show_background: true
                  show_state: true
              card_layout: large
              styles: |-
                ha-card {
                  --bubble-select-list-item-accent-color: ${state === 'on' ? 'rgb(50,205,50)' : ''} ;
                }
                .bubble-button-background {
                  background-color: ${state === 'on' ? 'rgb(50,205,50)' : ''} ;
                }
                .bubble-icon {
                  color: ${state === 'on' ? 'rgb(50,205,50)' : ''} !important;
                }
              icon: ""
              name: ""
              force_icon: false
            - type: custom:bubble-card
              card_type: separator
        - type: vertical-stack
          cards:
            - type: custom:bubble-card
              card_type: separator
              name: 餐厅room
              sub_button:
                - entity: sensor.wendu_keting
                  show_state: true
                  show_background: false
                  show_icon: true
                - entity: sensor.shidu_keting
                  show_state: true
                  state_background: false
                  show_background: false
              styles: |-
                ha-card {
                  color: white !important;
                }
                .bubble-sub-button{
                  color: white !important;
                }
            - type: custom:bubble-card
              card_type: climate
              sub_button:
                - entity: climate.kongtiao_keting
                  select_attribute: hvac_modes
                  show_arrow: false
              card_layout: large
              scrolling_effect: true
              show_icon: true
              force_icon: false
              show_state: true
              show_last_changed: false
              show_attribute: false
              state_color: true
              entity: climate.dinuan
            - type: custom:bubble-card
              card_type: button
              entity: vacuum.saodijiqiren
              card_layout: large
              show_state: true
              show_attribute: "true"
              attribute: battery_level
              sub_button:
                - name: Return to dock
                  icon: mdi:home
                  show_background: false
                  tap_action:
                    action: call-service
                    service: vacuum.return_to_base
                    target:
                      entity_id: vacuum.downstairs
                - name: Pause
                  icon: mdi:pause
                  show_background: false
                  tap_action:
                    action: call-service
                    service: vacuum.pause
                    target:
                      entity_id: vacuum.downstairs
                - name: Start
                  icon: mdi:play
                  tap_action:
                    action: call-service
                    service: vacuum.start
                    target:
                      entity_id: vacuum.downstairs
            - type: custom:bubble-card
              card_type: button
              entity: 冰箱
              show_state: true
              show_attribute: false
              attribute: supported_features
              tap_action:
                action: toggle
              button_action:
                tap_action:
                  action: toggle
              sub_button:
                - entity: sensor.refrigerator_temp_right
                  show_state: true
                  state_background: false
                  show_background: false
                  show_icon: false
                  show_name: true
                  name: 冷藏室
                - entity: sensor.refrigerator_temp_left
                  show_state: true
                  show_name: true
                  show_icon: false
                  state_background: true
                  name: 冷冻室
                  show_background: false
              card_layout: large-2-rows
              icon: mdi:fridge
              name: 冰箱
              force_icon: false
              button_type: name
            - type: custom:bubble-card
              card_type: separator
            - type: custom:bubble-card
              card_type: separator
              name: 主卫room
              sub_button:
                - entity: sensor.wendu_zhuwei
                  show_state: true
                  show_background: false
                  show_icon: true
                - entity: sensor.shidu_zhuwei
                  show_state: true
                  state_background: false
                  show_background: false
              styles: |-
                ha-card {
                  color: white !important;
                }
                .bubble-sub-button{
                  color: white !important;
                }
            - type: custom:bubble-card
              card_type: button
              entity: switch.yuba_zhuwei
              show_state: true
              show_attribute: false
              attribute: supported_features
              tap_action:
                action: toggle
              button_action:
                tap_action:
                  action: toggle
              sub_button:
                - entity: switch.yuba_zhuwei_blow
                  show_state: false
                  state_background: false
                  show_background: true
                  show_icon: false
                  show_name: true
                  name: 吹风
                  tap_action:
                    action: toggle
                - entity: switch.yuba_zhuwei_vent
                  show_state: false
                  show_name: true
                  show_icon: false
                  state_background: true
                  name: 换气
                  show_background: true
                  tap_action:
                    action: toggle
                - entity: switch.yuba_zhuwei_heat1
                  icon: ""
                  show_background: true
                  name: 取暖
                  state_background: false
                  show_name: true
                  show_state: false
                  show_icon: false
              card_layout: large
              icon: mdi:hvac
              name: ""
              force_icon: false
            - type: custom:bubble-card
              card_type: separator
            - type: custom:bubble-card
              card_type: separator
              name: 公卫room
              sub_button:
                - entity: sensor.wendu_gongwei
                  show_state: true
                  show_background: false
                  show_icon: true
                - entity: sensor.shidu_gongwei
                  show_state: true
                  state_background: false
                  show_background: false
              styles: |-
                ha-card {
                  color: white !important;
                }
                .bubble-sub-button{
                  color: white !important;
                }
            - type: custom:bubble-card
              card_type: button
              entity: switch.yuba_gongwei
              show_state: true
              show_attribute: false
              attribute: supported_features
              tap_action:
                action: toggle
              button_action:
                tap_action:
                  action: toggle
              sub_button:
                - entity: switch.yuba_gongwei_blow
                  show_state: false
                  state_background: false
                  show_background: true
                  show_icon: false
                  show_name: true
                  name: 吹风
                  tap_action:
                    action: toggle
                - entity: switch.yuba_gongwei_vent
                  show_state: false
                  show_name: true
                  show_icon: false
                  state_background: true
                  name: 换气
                  show_background: true
                  tap_action:
                    action: toggle
                - entity: switch.yuba_gongwei_heat1
                  icon: ""
                  show_background: true
                  name: 取暖
                  state_background: false
                  show_name: true
                  show_state: false
                  show_icon: false
              card_layout: large
              icon: mdi:hvac
              name: ""
              force_icon: false
            - type: custom:bubble-card
              card_type: button
              entity: select.xiyiji
              show_state: true
              show_attribute: true
              attribute: options
              tap_action:
                action: toggle
              button_action:
                tap_action:
                  action: toggle
              sub_button: []
              card_layout: large
              icon: mdi:washing-machine
              name: ""
              force_icon: false
            - type: custom:bubble-card
              card_type: separator
        - type: vertical-stack
          cards:
            - type: custom:bubble-card
              card_type: separator
              name: 厨房room
              sub_button:
                - entity: sensor.wendu_chufang
                  show_state: true
                  show_background: false
                  show_icon: true
                - entity: sensor.shidu_chufang
                  show_state: true
                  state_background: false
                  show_background: false
              styles: |-
                ha-card {
                  color: white !important;
                }
                .bubble-sub-button{
                  color: white !important;
                }
            - type: custom:bubble-card
              card_type: button
              entity: sensor.chufang_zhengzhuguo
              show_state: true
              show_attribute: false
              attribute: supported_features
              tap_action:
                action: toggle
              button_action:
                tap_action:
                  action: toggle
              sub_button:
                - entity: number.deerma_cn_647227974_v3_target_time_p_2_9
                  show_state: true
                  state_background: false
                  show_background: false
                  show_icon: false
                  show_name: true
                  name: ""
                - entity: button.deerma_cn_647227974_v3_pause_a_2_3
                  icon: mdi:pause
                  show_background: false
                - entity: button.deerma_cn_647227974_v3_cancel_cooking_a_2_2
                  icon: mdi:stop
                  show_background: false
                - entity: button.deerma_cn_647227974_v3_start_cook_a_2_1
                  tap_action:
                    action: toggle
                  show_background: false
                  icon: mdi:play
              card_layout: large
              icon: mdi:pot-steam
              name: ""
              force_icon: false
            - type: custom:bubble-card
              card_type: button
              entity: sensor.chufang_kongqizhaguo
              show_state: true
              show_attribute: false
              attribute: supported_features
              tap_action:
                action: toggle
              button_action:
                tap_action:
                  action: toggle
              sub_button:
                - entity: number.careli_cn_426704626_maf03_target_time_p_2_3
                  show_state: true
                  state_background: false
                  show_background: false
                  show_icon: false
                  show_name: true
                  name: ""
                - entity: button.careli_cn_426704626_maf03_pause_a_2_3
                  icon: mdi:pause
                  show_background: false
                - entity: button.careli_cn_426704626_maf03_cancel_cooking_a_2_2
                  icon: mdi:stop
                  show_background: false
                - entity: text.careli_cn_426704626_maf03_start_cook_a_3_1
                  tap_action:
                    action: perform-action
                    perform_action: text.set_value
                    target:
                      entity_id: text.careli_cn_426704626_maf03_start_cook_a_3_1
                    data:
                      value: "[M0,手动,180,2,0,0,0]"
                  show_background: false
                  icon: mdi:play
              card_layout: large
              icon: mdi:toaster-oven
              name: ""
              force_icon: false
            - type: custom:bubble-card
              card_type: button
              entity: sensor.chufang_dianfanbao
              show_state: true
              show_attribute: false
              attribute: supported_features
              tap_action:
                action: toggle
              button_action:
                tap_action:
                  action: toggle
              sub_button:
                - entity: button.chunmi_cn_119441120_normal3_cancel_cooking_a_2_2
                  icon: mdi:stop
                  show_background: false
                - entity: text.chunmi_cn_119441120_normal3_start_cook_a_2_1
                  tap_action:
                    action: perform-action
                    perform_action: text.set_value
                    target:
                      entity_id: text.chunmi_cn_119441120_normal3_start_cook_a_2_1
                    data:
                      value: "1"
                  show_background: false
                  icon: mdi:play
              card_layout: large
              icon: mdi:pot-mix
              name: ""
              force_icon: false
            - type: custom:bubble-card
              card_type: button
              entity: sensor.chufang_dianyaliguo
              show_state: true
              show_attribute: false
              attribute: supported_features
              tap_action:
                action: toggle
              button_action:
                tap_action:
                  action: toggle
              sub_button:
                - entity: sensor.chunmi_cn_824782007_mini1_left_time_p_2_5
                  show_state: true
                  show_icon: false
                  state_background: false
                  show_background: false
                - entity: button.chunmi_cn_824782007_mini1_cancel_cooking_a_2_2
                  icon: mdi:stop
                  show_background: false
                - entity: text.chunmi_cn_824782007_mini1_start_cook_a_2_1
                  tap_action:
                    action: perform-action
                    perform_action: text.set_value
                    target:
                      entity_id: text.chunmi_cn_824782007_mini1_start_cook_a_2_1
                    data:
                      value: "1"
                  show_background: false
                  icon: mdi:play
              card_layout: large
              icon: mdi:pot-mix
              name: ""
              force_icon: false
            - type: custom:bubble-card
              card_type: button
              entity: sensor.chufang_pobiji
              show_state: true
              show_attribute: false
              attribute: supported_features
              tap_action:
                action: toggle
              button_action:
                tap_action:
                  action: toggle
              sub_button:
                - entity: sensor.chunmi_cn_682421582_a1_left_time_p_2_3
                  show_state: true
                  show_icon: false
                  state_background: false
                  show_background: false
                - entity: button.chunmi_cn_682421582_a1_cancel_cooking_a_2_2
                  icon: mdi:stop
                  show_background: false
                - entity: text.chunmi_cn_682421582_a1_start_cook_a_2_1
                  tap_action:
                    action: perform-action
                    perform_action: text.set_value
                    target:
                      entity_id: text.chunmi_cn_682421582_a1_start_cook_a_2_1
                    data:
                      value: "1"
                  show_background: false
                  icon: mdi:play
              card_layout: large
              icon: mdi:blender
              name: ""
              force_icon: false
            - type: custom:bubble-card
              card_type: button
              show_state: true
              show_attribute: false
              attribute: supported_features
              tap_action:
                action: toggle
              button_action:
                tap_action:
                  action: toggle
              sub_button:
                - entity: switch.youyanji
                  icon: mdi:stop
                  show_background: false
              card_layout: large
              icon: mdi:fan
              name: ""
              force_icon: false
              button_type: state
              entity: sensor.youyanji
            - type: custom:bubble-card
              card_type: button
              entity: switch.180319907614846_power
              show_state: true
              show_attribute: false
              attribute: supported_features
              tap_action:
                action: toggle
              button_action:
                tap_action:
                  action: toggle
              sub_button:
                - entity: sensor.180319907614846_time_remaining
                  tap_action:
                    action: none
                  show_background: false
                  icon: ""
                  show_state: true
                  show_icon: false
              card_layout: large
              icon: mdi:dishwasher
              name: 洗碗机
              force_icon: false
            - type: custom:bubble-card
              card_type: button
              card_layout: large
              button_type: name
              name: 净水器
              icon: mdi:water
              sub_button:
                - entity: sensor.yunmi_cn_103342738_lx5_tds_in_p_3_1
                  name: 入水
                  show_name: true
                  show_icon: false
                  state_background: false
                  show_background: false
                  show_last_changed: false
                  show_state: true
                - entity: sensor.yunmi_cn_103342738_lx5_tds_out_p_3_2
                  show_state: true
                  show_icon: false
                  state_background: false
                  show_background: false
                  name: 出水
                  show_name: true
            - type: custom:bubble-card
              card_type: separator

