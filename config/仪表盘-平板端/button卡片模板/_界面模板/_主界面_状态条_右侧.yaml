主界面_状态条_右侧:
  triggers_update: all    
  styles:   
    grid: 
      - grid-template-areas: |
          "空调" "风扇" "地暖" "净化器" "加湿器" "浴霸" "媒体" "主题"
      - grid-template-columns: 60px
      - grid-template-rows: 70px 70px 70px 70px 70px 70px 70px 70px
    card:
      - cursor: none
      - --mdc-ripple-press-opacity: 0
      - padding: 10px 0 0 0
      - background: transparent 
      - width: 70px 
      - height: 570px
  custom_fields: 
    空调:
      card:
        type: custom:button-card
        show_icon: true
        show_name: true
        icon: mdi:air-conditioner
        name: 空调
        custom_fields:
          num: |
            [[[
                const date = new Date();
                window.月份 = date.getMonth()+1;
                var sum =0;
                for (var i=0; i<variables.空调?.length; i++){
                    var entityConfig = variables.空调?.[i];  
                    var statesum = variables.空调?.[i]?.states;
                    if (Array.isArray(entityConfig.entity)) { 
                      var activenumber =0;
                      for (var j=0; j < entityConfig.entity.length; j++){
                          var singleEntity  = entityConfig.entity[j];
                          var currentState = states[singleEntity].state;
                          if (statesum.includes(currentState)) {
                            activenumber ++;
                          }
                      }
                      if (activenumber >0) sum++;
                    } else {
                      var currentState = states[entityConfig.entity].state;
                      if (statesum.includes(currentState)){
                            sum++;
                      }
                    }
                } 
                window.空调设备=sum;
                return sum;
            ]]]
        styles:
          custom_fields:
            num:
              - background: |
                  [[[              
                      if (月份>=10 && 空调设备> 0) return 'rgb(255,140,0)';
                      if (月份>=5  && 空调设备> 0) return 'rgb(0,191,255)';
                      if (月份>=1  && 空调设备> 0) return 'rgb(255,140,0)'; 
                      if (空调设备==0) return 'rgb(0,0,0,0)';   
                  ]]]
              - color: >
                  [[[ 
                      if (空调设备> 0) return 'rgb(255,255,255)';
                      if (空调设备==0) return 'rgb(0,0,0,0)';  
                  ]]]
              - padding: 0
              - font-size: 12px
              - font-weight: bold
              - width: 16px
              - height: 16px
              - border-radius: 100%
              - position: absolute
              - margin-left: 42px 
              - margin-top: -12px
              - align-self: start
          icon:
            - padding: 0
            - width: 24px
            - height: 24px
            - color: |
                [[[ 
                    if (月份>=10 && 空调设备> 0) return 'rgb(255,140,0)';
                    if (月份>=5  && 空调设备> 0) return 'rgb(0,191,255)';
                    if (月份>=1  && 空调设备> 0) return 'rgb(255,140,0)'; 
                    if (空调设备==0) return 'rgb(255,255,255)';   
                ]]]
          name: 
            - padding: 0
            - font-size: 13px
            - font-weight: bold
            - color: white
          card:
            - padding: 5px
            - width: 55px
            - height: 60px
            - overflow: visible !important
            - border-radius: 10px
            - background: |
                [[[
                  return theme()=="on" ? "rgb(0,0,0,0.3)" : "rgb(255,255,255,0.25)"
                ]]] 
        tap_action: !include  "/config/仪表盘-平板端/button卡片模板/主界面弹出菜单/右侧状态栏-空调.yaml"
    风扇:
      card:
        type: custom:button-card
        show_icon: true
        show_name: true
        icon: mdi:fan
        name: 风扇
        custom_fields:
          num: |
            [[[
                const date = new Date();
                window.月份 = date.getMonth()+1;
                var sum =0;
                for (var i=0; i<variables.风扇?.length; i++){
                    var entityConfig = variables.风扇?.[i];  
                    var statesum = variables.风扇?.[i]?.states;
                    if (Array.isArray(entityConfig.entity)) { 
                      var activenumber =0;
                      for (var j=0; j < entityConfig.entity.length; j++){
                          var singleEntity  = entityConfig.entity[j];
                          var currentState = states[singleEntity].state;
                          if (statesum.includes(currentState)) {
                            activenumber ++;
                          }
                      }
                      if (activenumber >0) sum++;
                    } else {
                      var currentState = states[entityConfig.entity].state;
                      if (statesum.includes(currentState)){
                            sum++;
                      }
                    }
                } 
                window.风扇设备=sum;
                return sum;
            ]]]
        styles:
          custom_fields:
            num:
              - background: |
                  [[[              
                      if (风扇设备> 0) return 'rgb(0,191,155)';
                      if (风扇设备==0) return 'rgb(0,0,0,0)';   
                  ]]]
              - color: >
                  [[[ 
                      if (风扇设备> 0) return 'rgb(255,255,255)';
                      if (风扇设备==0) return 'rgb(0,0,0,0)';  
                  ]]]
              - padding: 0
              - font-size: 12px
              - font-weight: bold
              - width: 16px
              - height: 16px
              - border-radius: 100%
              - position: absolute
              - margin-left: 42px 
              - margin-top: -12px
              - align-self: start
          icon:
            - padding: 0
            - width: 24px
            - height: 24px
            - color: |
                [[[ 
                    if (风扇设备> 0) return 'rgb(0,191,155)';
                    if (风扇设备==0) return 'rgb(255,255,255)';   
                ]]]
          name: 
            - padding: 0
            - font-size: 13px
            - font-weight: bold
            - color: white
          card:
            - padding: 5px
            - width: 55px
            - height: 60px
            - overflow: visible !important
            - border-radius: 10px
            - background: |
                [[[
                  return theme()=="on" ? "rgb(0,0,0,0.3)" : "rgb(255,255,255,0.25)"
                ]]] 
        tap_action: !include  "/config/仪表盘-平板端/button卡片模板/主界面弹出菜单/右侧状态栏-风扇.yaml"
    地暖:
      card:
        type: custom:button-card
        show_icon: true
        show_name: true
        icon: mdi:heating-coil
        name: 地暖
        custom_fields:
          num: |
            [[[
                var sum =0;
                for (var i=0; i<variables.地暖?.length; i++){
                    var entityConfig = variables.地暖?.[i];  
                    var statesum = variables.地暖?.[i]?.states;
                    if (Array.isArray(entityConfig.entity)) { 
                      var activenumber =0;
                      for (var j=0; j < entityConfig.entity.length; j++){
                          var singleEntity  = entityConfig.entity[j];
                          var currentState = states[singleEntity].state;
                          if (statesum.includes(currentState)) {
                            activenumber ++;
                          }
                      }
                      if (activenumber >0) sum++;
                    } else {
                      var currentState = states[entityConfig.entity].state;
                      if (statesum.includes(currentState)){
                            sum++;
                      }
                    }
                } 
                window.地暖设备=sum;
                return sum;
            ]]]
        styles:
          custom_fields:
            num:
              - background: |
                  [[[              
                      if (地暖设备> 0) return 'rgb(255,100,0)';
                      if (地暖设备==0) return 'rgb(0,0,0,0)';   
                  ]]]
              - color: >
                  [[[ 
                      if (地暖设备> 0) return 'rgb(255,255,255)';
                      if (地暖设备==0) return 'rgb(0,0,0,0)';  
                  ]]]
              - padding: 0
              - font-size: 12px
              - font-weight: bold
              - width: 16px
              - height: 16px
              - border-radius: 100%
              - position: absolute
              - margin-left: 42px
              - margin-top: -12px
              - align-self: start
          icon:
            - padding: 0
            - width: 24px
            - height: 24px
            - color: |
                [[[ 
                    if (地暖设备> 0) return 'rgb(255,100,0)';
                    if (地暖设备==0) return 'rgb(255,255,255)';   
                ]]]
          name: 
            - padding: 0
            - font-size: 13px
            - font-weight: bold
            - color: white
          card:
            - padding: 5px
            - width: 55px
            - height: 60px
            - overflow: visible !important
            - border-radius: 10px
            - background: |
                [[[
                  return theme()=="on" ? "rgb(0,0,0,0.3)" : "rgb(255,255,255,0.25)"
                ]]] 
        tap_action: !include  "/config/仪表盘-平板端/button卡片模板/主界面弹出菜单/右侧状态栏-地暖.yaml"
    净化器:
      card:
        type: custom:button-card
        show_icon: true
        show_name: true
        icon: mdi:air-purifier
        name: 净化器
        custom_fields:
          num: |
            [[[
                var sum =0;
                for (var i=0; i<variables.净化器?.length; i++){
                    var entityConfig = variables.净化器?.[i];  
                    var statesum = variables.净化器?.[i]?.states;
                    if (Array.isArray(entityConfig.entity)) { 
                      var activenumber =0;
                      for (var j=0; j < entityConfig.entity.length; j++){
                          var singleEntity  = entityConfig.entity[j];
                          var currentState = states[singleEntity].state;
                          if (statesum.includes(currentState)) {
                            activenumber ++;
                          }
                      }
                      if (activenumber >0) sum++;
                    } else {
                      var currentState = states[entityConfig.entity].state;
                      if (statesum.includes(currentState)){
                            sum++;
                      }
                    }
                } 
                window.净化器设备=sum;
                return sum;
            ]]]
        styles:
          custom_fields:
            num:
              - background: |
                  [[[              
                      if (净化器设备> 0) return 'rgb(50,205,50)';
                      if (净化器设备==0) return 'rgb(0,0,0,0)';   
                  ]]]
              - color: >
                  [[[ 
                      if (净化器设备> 0) return 'rgb(255,255,255)';
                      if (净化器设备==0) return 'rgb(0,0,0,0)';  
                  ]]]
              - padding: 0
              - font-size: 12px
              - font-weight: bold
              - width: 16px
              - height: 16px
              - border-radius: 100%
              - position: absolute
              - margin-left: 42px
              - margin-top: -12px
              - align-self: start
          icon:
            - padding: 0
            - width: 24px
            - height: 24px
            - color: |
                [[[ 
                    if (净化器设备> 0) return 'rgb(50,205,50)';
                    if (净化器设备==0) return 'rgb(255,255,255)';   
                ]]]
          name: 
            - padding: 0
            - font-size: 13px
            - font-weight: bold
            - color: white
          card:
            - padding: 5px
            - width: 55px
            - height: 60px
            - overflow: visible
            - border-radius: 10px
            - background: |
                [[[
                  return theme()=="on" ? "rgb(0,0,0,0.3)" : "rgb(255,255,255,0.25)"
                ]]] 
        tap_action: !include  "/config/仪表盘-平板端/button卡片模板/主界面弹出菜单/右侧状态栏-净化器.yaml"
    加湿器:
      card:
        type: custom:button-card
        show_icon: true
        show_name: true
        icon: mdi:air-humidifier
        name: 加湿器
        custom_fields:
          num: |
            [[[
                var sum =0;
                for (var i=0; i<variables.加湿器?.length; i++){
                    var entityConfig = variables.加湿器?.[i];  
                    var statesum = variables.加湿器?.[i]?.states;
                    if (Array.isArray(entityConfig.entity)) { 
                      var activenumber =0;
                      for (var j=0; j < entityConfig.entity.length; j++){
                          var singleEntity  = entityConfig.entity[j];
                          var currentState = states[singleEntity].state;
                          if (statesum.includes(currentState)) {
                            activenumber ++;
                          }
                      }
                      if (activenumber >0) sum++;
                    } else {
                      var currentState = states[entityConfig.entity].state;
                      if (statesum.includes(currentState)){
                            sum++;
                      }
                    } 
                } 
                window.加湿器设备=sum;
                return sum;
            ]]]
        styles:
          custom_fields:
            num:
              - background: |
                  [[[              
                      if (加湿器设备> 0) return 'rgb(0,191,255)';
                      if (加湿器设备==0) return 'rgb(0,0,0,0)';   
                  ]]]
              - color: >
                  [[[ 
                      if (加湿器设备> 0) return 'rgb(255,255,255)';
                      if (加湿器设备==0) return 'rgb(0,0,0,0)';  
                  ]]]
              - padding: 0
              - font-size: 12px
              - font-weight: bold
              - width: 16px
              - height: 16px
              - border-radius: 100%
              - position: absolute
              - margin-left: 42px
              - margin-top: -12px
              - align-self: start
          icon:
            - padding: 0
            - width: 24px
            - height: 24px
            - color: |
                [[[ 
                    if (加湿器设备> 0) return 'rgb(0,191,255)';
                    if (加湿器设备==0) return 'rgb(255,255,255)';   
                ]]]
          name: 
            - padding: 0
            - font-size: 13px
            - font-weight: bold
            - color: white
          card:
            - padding: 5px
            - width: 55px
            - height: 60px
            - overflow: visible !important
            - border-radius: 10px
            - background: |
                [[[
                  return theme()=="on" ? "rgb(0,0,0,0.3)" : "rgb(255,255,255,0.25)"
                ]]] 
        tap_action: !include  "/config/仪表盘-平板端/button卡片模板/主界面弹出菜单/右侧状态栏-加湿器.yaml"
    浴霸:
      card:
        type: custom:button-card
        show_icon: true
        show_name: true
        icon: mdi:hvac
        name: 浴霸
        custom_fields:
          num: |
            [[[
                var sum =0;
                for (var i=0; i<variables.浴霸?.length; i++){
                    var entityConfig = variables.浴霸?.[i];  
                    var statesum = variables.浴霸?.[i]?.states;
                    if (Array.isArray(entityConfig.entity)) { 
                      var activenumber =0;
                      for (var j=0; j < entityConfig.entity.length; j++){
                          var singleEntity  = entityConfig.entity[j];
                          var currentState = states[singleEntity].state;
                          if (statesum.includes(currentState)) {
                            activenumber ++;
                          }
                      }
                      if (activenumber >0) sum++;
                    } else {
                      var currentState = states[entityConfig.entity].state;
                      if (statesum.includes(currentState)){
                            sum++;
                      }
                    }
                } 
                window.浴霸设备=sum;
                return sum;
            ]]]
        styles:
          custom_fields:
            num:
              - background: |
                  [[[              
                      if (浴霸设备> 0) return 'rgb(255,140,0)';
                      if (浴霸设备==0) return 'rgb(0,0,0,0)';   
                  ]]]
              - color: >
                  [[[ 
                      if (浴霸设备> 0) return 'rgb(255,255,255)';
                      if (浴霸设备==0) return 'rgb(0,0,0,0)';  
                  ]]]
              - padding: 0
              - font-size: 12px
              - font-weight: bold
              - width: 16px
              - height: 16px
              - border-radius: 100%
              - position: absolute
              - margin-left: 42px
              - margin-top: -12px
              - align-self: start
          icon:
            - padding: 0
            - width: 24px
            - height: 24px
            - color: |
                [[[ 
                    if (浴霸设备> 0) return 'rgb(255,140,0)';
                    if (浴霸设备==0) return 'rgb(255,255,255)';   
                ]]]
          name: 
            - padding: 0
            - font-size: 13px
            - font-weight: bold
            - color: white
          card:
            - padding: 5px
            - width: 55px
            - height: 60px
            - overflow: visible !important
            - border-radius: 10px
            - background: |
                [[[
                  return theme()=="on" ? "rgb(0,0,0,0.3)" : "rgb(255,255,255,0.25)"
                ]]] 
        tap_action: !include  "/config/仪表盘-平板端/button卡片模板/主界面弹出菜单/右侧状态栏-浴霸.yaml"
    媒体:
      card:
        type: custom:button-card
        show_icon: true
        show_name: true
        icon: mdi:multimedia
        name: 媒体
        custom_fields:
          num: |
            [[[
                var sum =0;
                for (var i=0; i<variables.媒体?.length; i++){
                    var entityConfig = variables.媒体?.[i];  
                    var statesum = variables.媒体?.[i]?.states;
                    if (Array.isArray(entityConfig.entity)) { 
                      var activenumber =0;
                      for (var j=0; j < entityConfig.entity.length; j++){
                          var singleEntity  = entityConfig.entity[j];
                          var currentState = states[singleEntity].state;
                          if (statesum.includes(currentState)) {
                            activenumber ++;
                          }
                      }
                      if (activenumber >0) sum++;
                    } else {
                      var currentState = states[entityConfig.entity].state;
                      if (statesum.includes(currentState)){
                            sum++;
                      }
                    }
                } 
                window.媒体设备=sum;
                return sum;
            ]]]
        styles:
          custom_fields:
            num:
              - background: |
                  [[[              
                      if (媒体设备> 0) return 'rgb(255,0,255)';
                      if (媒体设备==0) return 'rgb(0,0,0,0)';   
                  ]]]
              - color: >
                  [[[ 
                      if (媒体设备> 0) return 'rgb(255,255,255)';
                      if (媒体设备==0) return 'rgb(0,0,0,0)';  
                  ]]]
              - padding: 0
              - font-size: 12px
              - font-weight: bold
              - width: 16px
              - height: 16px
              - border-radius: 100%
              - position: absolute
              - margin-left: 42px
              - margin-top: -12px
              - align-self: start
          icon:
            - padding: 0
            - width: 24px
            - height: 24px
            - color: |
                [[[ 
                    if (媒体设备> 0) return 'rgb(255,0,255)';
                    if (媒体设备==0) return 'rgb(255,255,255)';   
                ]]]
          name: 
            - padding: 0
            - font-size: 13px
            - font-weight: bold
            - color: white
          card:
            - padding: 5px
            - width: 55px
            - height: 60px
            - overflow: visible !important
            - border-radius: 10px
            - background: |
                [[[
                  return theme()=="on" ? "rgb(0,0,0,0.3)" : "rgb(255,255,255,0.25)"
                ]]] 
        tap_action: !include  "/config/仪表盘-平板端/button卡片模板/主界面弹出菜单/右侧状态栏-媒体.yaml"
    主题:
      card:
        type: custom:button-card
        triggers_update: all 
        show_icon: true
        show_name: true
        icon: mdi:brush-variant
        name: 主题 
        custom_fields:
          num: |
            [[[
                var open = states[variables.主题?.色相开关]?.state;
                return open == "on" ? "A" : "";
            ]]]
        styles:
          custom_fields:
            num:
              - background: |
                  [[[         
                      var open = states[variables.主题?.色相开关]?.state;
                      return open == "on" ? "rgb(230,50,0)" : "rgb(0,0,0,0)";  
                  ]]]
              - color: >
                  [[[ 
                      var open = states[variables.主题?.色相开关]?.state;
                      return open == "on" ? "rgb(255,255,255)" : "rgb(0,0,0,0)";  
                  ]]]
              - filter: '[[[return  "hue-rotate("+states[variables.主题?.色相]?.state+"deg)"]]] ' 
              - padding: 0
              - font-size: 12px
              - font-weight: bold
              - width: 16px 
              - height: 16px
              - border-radius: 100%
              - position: absolute
              - margin-left: 42px
              - margin-top: -12px
              - align-self: start
          icon:
            - padding: 0
            - width: 24px
            - height: 24px
            - filter: '[[[return  "hue-rotate("+states[variables.主题?.色相]?.state+"deg)"]]] ' 
            - color: |
                [[[ 
                    var open = states[variables.主题?.色相开关]?.state;
                    return open == "on" ? "rgb(230,50,0)" : "rgb(255,255,255)";  
                ]]]
          name: 
            - padding: 0
            - font-size: 13px
            - font-weight: bold
            - color: white
          card:
            - padding: 5px
            - width: 55px
            - height: 60px
            - overflow: visible !important
            - border-radius: 10px
            - background: |
                [[[
                  return theme()=="on" ? "rgb(0,0,0,0.3)" : "rgb(255,255,255,0.25)"
                ]]] 
        tap_action: !include  "/config/仪表盘-平板端/button卡片模板/主界面弹出菜单/右侧状态栏-主题.yaml"
