净化器switch:
  triggers_update:
    - '[[[ return variables.净化器 ?? ""]]]'
    - '[[[ return variables.风速 ?? "" ]]]'
    - '[[[ return variables.模式 ?? "" ]]]'
    - '[[[ return variables.温度 ?? "" ]]]'
    - '[[[ return variables.湿度 ?? "" ]]]'
    - '[[[ return variables.pm25 ?? "" ]]]' 
    - '[[[ return variables.附加信息 ?? "" ]]]' 
    - '[[[ return variables.指示灯 ?? "" ]]]' 
    - '[[[ return variables.提示音 ?? "" ]]]' 
    - '[[[ return variables.按键锁 ?? "" ]]]' 
    - '[[[ return variables.滤芯剩余比 ?? "" ]]]' 
  styles:
    grid: 
      - function: |
          [[[
              window.净化器switch颜色 = "rgb(50,205,50)";  
              window.净化器switch警告颜色 = "rgb(255,20,0)";
          ]]]
      - grid-template-areas: |
          [[[
             if (variables.附加信息=='左侧')  return '"副背景 主背景 主背景 主背景 主背景 主背景 主背景 主背景 主背景"' +
                                                    '"副背景   y   环背景 环背景 环背景 环背景 环背景 环背景   x"' +
                                                    '"副背景   y   渐变圆 渐变圆 渐变圆 渐变圆 渐变圆 渐变圆   x"' +
                                                    '"副背景   y   第一排 第一排 第一排 第一排 第一排 第一排   x"' +
                                                    '"副背景   y   第二排 第二排 第二排 第二排 第二排 第二排   x"' +
                                                    '"副背景   y     z0   名称   名称   名称   名称   z3     x"' +
                                                    '"副背景   y     z0    z1    状态   状态    z2   z3     x"' +
                                                    '"副背景   y     z0    z1   主数值 主数值   z2    z3     x"' +
                                                    '"副背景   y     z0    z1   主数值 主数值  单位   z3     x"' +
                                                    '"副背景   y     z0   副数值 副数值 副数值 副数值  z3     x"' +
                                                    '"副背景   y     z0   减按钮 减按钮 加按钮 加按钮  z3     x"' +
                                                    '"副背景   y   按钮一 按钮一 按钮一 按钮二 按钮二 按钮二   x"' +
                                                    '"副背景   y   按钮三 按钮三 按钮四 按钮四 按钮五 按钮五   x"' ;

             if (variables.附加信息=='右侧')  return '"主背景 主背景 主背景 主背景 主背景 主背景 主背景 主背景 副背景"' +
                                                    '"  y   环背景 环背景 环背景 环背景 环背景 环背景    x   副背景"' +
                                                    '"  y   渐变圆 渐变圆 渐变圆 渐变圆 渐变圆 渐变圆    x   副背景"' +
                                                    '"  y   第一排 第一排 第一排 第一排 第一排 第一排    x   副背景"' +
                                                    '"  y   第二排 第二排 第二排 第二排 第二排 第二排    x   副背景"' +
                                                    '"  y    z0    名称   名称   名称  名称    z3      x   副背景"' +
                                                    '"  y    z0     z1    状态   状态   z2    z3      x   副背景"' +
                                                    '"  y    z0     z1   主数值  主数值  z2    z3      x   副背景"' +
                                                    '"  y    z0     z1   主数值  主数值 单位   z3      x   副背景"' +
                                                    '"  y    z0    副数值 副数值 副数值 副数值  z3      x   副背景"' +
                                                    '"  y    z0    减按钮 减按钮 加按钮 加按钮  z3      x   副背景"' +
                                                    '"  y   按钮一 按钮一 按钮一 按钮二 按钮二 按钮二    x   副背景"' +
                                                    '"  y   按钮三 按钮三 按钮四 按钮四 按钮五 按钮五    x   副背景"' ;

             return '"主背景 主背景 主背景 主背景 主背景 主背景 主背景 主背景"' +
                    '"  y   环背景 环背景 环背景 环背景 环背景 环背景   x"' +
                    '"  y   渐变圆 渐变圆 渐变圆 渐变圆 渐变圆 渐变圆   x"' +
                    '"  y   第一排 第一排 第一排 第一排 第一排 第一排   x"' +
                    '"  y   第二排 第二排 第二排 第二排 第二排 第二排   x"' +
                    '"  y     z0   名称   名称   名称   名称   z3     x"' +
                    '"  y     z0    z1   状态    状态    z2   z3      x"' +
                    '"  y     z0    z1   主数值 主数值   z2   z3      x"' +
                    '"  y     z0    z1   主数值 主数值  单位   z3     x"' +
                    '"  y     z0   副数值 副数值 副数值 副数值  z3     x"' +
                    '"  y     z0   减按钮 减按钮 加按钮 加按钮  z3     x"' +
                    '"  y   按钮一 按钮一 按钮一 按钮二 按钮二 按钮二   x"' +
                    '"  y   按钮三 按钮三 按钮四 按钮四 按钮五 按钮五   x"' ;
          ]]] 
      - grid-template-columns: |
          [[[
             if (variables.附加信息=='左侧')  return "67px 18px 44px 44px 44px 44px 44px 44px 18px";
             if (variables.附加信息=='右侧')  return "18px 44px 44px 44px 44px 44px 44px 25px 67px";
             return "18px 44px 44px 44px 44px 44px 44px 18px";
          ]]]
      - grid-template-rows: 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px 0px
    card:
      - padding: 0
      - width: |
          [[[
              if (variables.附加信息=='左侧' || variables.附加信息=='右侧') return "370px";
              return "300px";
          ]]]
      - height: 455px
      - border-width: 0
      - background: rgb(0,0,0,0)
  custom_fields:
    主背景:
      card:
        type: custom:button-card
        styles:
          card:
            - margin-top: 455px
            - width: 300px
            - height: 455px
            - border-radius: 15px
            - border-width: 0
            - background: '[[[ return variables.主题 =="on" ? "rgb(255,255,255)" : "rgb(50,50,50)" ]]]'
    环背景:
      card:
        type: custom:button-card
        styles: 
          card:
            - margin-top: 428px
            - border-width: 0
            - background: |
                [[[ 
                    var state = states[variables.净化器]?.state;
                    var pm = states[variables.pm25]?.state;
                    if(state=='on' && pm< 100) return 净化器switch颜色;
                    if(state=='on' && pm>=100) return 净化器switch警告颜色;
                    return variables.主题 =="on" ? "rgb(200,200,200)" : "rgb(100,100,100)";
                ]]]
            - width: 300px
            - height: 264px
            - margin-left: 10px
            - clip-path: >-
                path('M224.1,121.4c0-1.8,0.1-3.5,0-5.3c-0.2-2.8-0.4-5.6-0.8-8.3c-0.6-4.4-1.5-8.8-2.6-13.1
                c-1.1-4.3-2.6-8.5-4.3-12.6c-2.4-5.9-5.3-11.5-8.8-16.8c-2.6-4-5.4-7.8-8.6-11.3c-2.2-2.5-4.4-4.9-6.8-7.2
                c-5.4-5.1-11.3-9.7-17.7-13.5c-6.4-3.8-13.1-7-20.2-9.4c-5.2-1.7-10.4-3-15.8-4c-2.4-0.4-4.8-0.7-7.2-1c-1-0.1-2.1-0.2-3.1-0.2
                c-3.2-0.2-6.5-0.5-9.7-0.2c-3.3,0.2-6.7,0.4-10,0.8c-7.2,0.9-14.2,2.5-21.1,4.9c-9,3.1-17.4,7.5-25.3,12.9c-3.2,2.2-6.3,4.6-9.2,7.2
                c-2.7,2.4-5.2,4.9-7.6,7.5C41,56.7,37.1,62,33.6,67.7c-1.5,2.5-3,5.1-4.3,7.7C25.6,83,22.7,90.9,21,99.2c-0.8,3.7-1.4,7.5-1.8,11.3
                c-0.2,2.2-0.3,4.5-0.5,6.7c-0.1,1.6-0.2,3.2-0.1,4.8c0.1,3.3,0.3,6.6,0.6,9.9c0.5,5.8,1.7,11.4,3.2,17c1.1,4.2,2.6,8.3,4.3,12.4
                c2.9,6.8,6.4,13.2,10.6,19.2c1.9,2.8,4,5.5,6.2,8c1.7,2,3.5,3.9,5.3,5.7c1.7,1.8,2.6,4,2.6,6.5c-0.1,5-4.1,8.8-8.4,9.1
                c-2.9,0.2-5.4-0.7-7.5-2.8c-6-6-11.3-12.5-15.9-19.6c-3.3-5.2-6.3-10.6-8.8-16.2c-2-4.4-3.7-8.9-5.2-13.5c-1.6-5-2.9-10.1-3.7-15.3
                c-0.5-3.3-1-6.5-1.3-9.8c-0.2-2.6-0.5-5.1-0.4-7.7c0-1-0.2-2.1-0.2-3.1c0.2-2.9,0.1-5.8,0.3-8.7c0.1-2.1,0.4-4.2,0.6-6.4
                c0.3-2.5,0.7-4.9,1.1-7.4c1-5.7,2.5-11.3,4.3-16.7c1.4-4.3,3.2-8.4,5-12.5c2.8-6.2,6.3-12.1,10.1-17.8c2.7-4,5.7-7.8,9-11.4
                c2-2.2,4-4.4,6.1-6.5c2.8-2.7,5.6-5.2,8.6-7.6c3-2.5,6.2-4.8,9.4-6.9c4.9-3.2,10-6.1,15.4-8.6c4.5-2.1,9-3.9,13.7-5.5
                c4.4-1.4,8.8-2.6,13.3-3.5c3.7-0.7,7.4-1.3,11.1-1.7c3.7-0.4,7.4-0.5,11.1-0.7c2.9-0.1,5.8,0.1,8.7,0.1c2.2,0,4.4,0.3,6.6,0.5
                c3.7,0.4,7.3,1,11,1.7c2.3,0.4,4.5,1,6.8,1.6c3.7,1,7.3,2.1,10.8,3.4c4.1,1.5,8.1,3.2,12,5.2c6,2.9,11.7,6.4,17.1,10.2
                c2.9,2.1,5.7,4.4,8.5,6.7c3.5,2.9,6.6,6.2,9.8,9.4c2,2.1,3.8,4.3,5.6,6.5c2.6,3.1,4.8,6.4,7,9.7c1.6,2.5,3.1,5,4.5,7.6
                c3.3,6.1,6.1,12.4,8.4,18.9c1.7,4.8,3.1,9.7,4.1,14.7c0.7,3.5,1.3,7,1.7,10.5c0.3,2.7,0.5,5.3,0.7,8c0.2,3.7,0.2,7.4,0.1,11.1
                c-0.1,3.2-0.4,6.4-0.8,9.5c-0.6,5.1-1.5,10.2-2.8,15.3c-1.3,5.2-3,10.3-5,15.3c-1.1,2.8-2.3,5.5-3.6,8.2c-1.8,3.7-3.7,7.2-5.9,10.7
                c-2.2,3.6-4.6,7.1-7.2,10.4c-1.6,2-3.2,4-4.9,5.9c-1.7,2-3.5,3.9-5.3,5.7c-3.1,3.2-8.1,3.6-11.8,1.1c-4.7-3.2-5.2-9.7-1.7-13.6
                c0.8-0.9,1.6-1.7,2.4-2.6c3.7-3.8,7-8,10.1-12.4c3.1-4.6,5.9-9.3,8.2-14.3c3.4-7.2,5.9-14.6,7.6-22.4c0.7-3.2,1.2-6.4,1.6-9.7
                c0.2-2,0.4-3.9,0.5-5.9C224.1,125.3,224.1,123.3,224.1,121.4C224.1,121.4,224.1,121.4,224.1,121.4z')
    渐变圆:
      card:
        type: custom:button-card
        styles: 
          card:
            - margin-top: 398px
            - border-width: 0
            - background: |
                [[[ 
                    var state = states[variables.净化器]?.state;
                    var pm = states[variables.pm25]?.state;
                    if(state=='on'&& pm<100)  return "radial-gradient("+ 净化器switch颜色 +" -20%, rgb(0,0,0,0) 50%)" ;
                    if(state=='on'&& pm>=100) return "radial-gradient("+ 净化器switch警告颜色 +" -20%, rgb(0,0,0,0) 50%)" ;
                    return "rgb(0,0,0,0)" ;
                ]]]
            - width: 264px
            - height: 264px
    第一排:
      card:
        type: custom:button-card
        styles:
          card:
            - margin-top: 720px
            - width: 264px
            - height: 42px
            - border-width: 0
            - background: '[[[ return variables.主题 =="on" ? "rgb(230,230,230)" : "rgb(80,80,80)" ]]]'
            - border-radius: 10px
    第二排:
      card:
        type: custom:button-card
        styles:
          card:
            - margin-top: 830px
            - width: 264px
            - height: 42px
            - border-width: 0
            - background: '[[[ return variables.主题 =="on" ? "rgb(230,230,230)" : "rgb(80,80,80)" ]]]'
            - border-radius: 10px
    名称:
      card:
        type: custom:button-card
        label: '[[[ return states[variables.净化器]?.attributes?.friendly_name ?? "名称" ]]]'
        show_label: true
        styles:
          card:
            - margin-top: 73px
            - border-width: 0
            - background: rgb(0,0,0,0)
          label:
            - color: '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
            - font-size: 19px
    状态 :
      card:
        type: custom:button-card
        label: |
          [[[ 
              if(states[variables.净化器]?.state=='on')  return  states[variables.模式]?.state;
              if(states[variables.净化器]?.state=='off') return '关闭';
              return '离线';
          ]]]
        show_label: true
        styles:
          card:
            - border-width: 0
            - background: rgb(0,0,0,0)
            - margin-top: 314px
          label:
            - color: '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
            - font-size: 15px
    副数值:
      card:
        type: custom:button-card
        styles:
          grid:
            - grid-template-areas: |
                'b0 b1 b2' 
            - grid-template-columns: 15% 33% 40%
            - grid-template-rows: 16px
          card:
            - border-width: 0
            - background: rgb(0,0,0,0)
            - margin-top: 492px
            - width: 176px
        custom_fields:
          b1:
            card:
              type: custom:button-card
              layout: icon_name
              icon: mdi:thermometer
              name: '[[[ return Math.round(states[variables.温度]?.state,0)+"°C" ]]]'
              show_name: true
              show_icon: true
              styles:
                card:
                  - width: 60px
                  - border-width: 0
                  - background: rgb(0,0,0,0)
                icon:
                  - color: '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
                  - width: 16px
                  - height: 16px
                  - margin-top: -2px
                  - margin-left: 8px
                name:
                  - color: '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
                  - font-size: 16px
          b2:
            card:
              type: custom:button-card
              layout: icon_name
              icon: mdi:water-percent
              name: '[[[ return Math.round(states[variables.湿度]?.state,0)+"%" ]]]'
              show_name: true
              show_icon: true
              styles:
                card:
                  - border-width: 0
                  - background: rgb(0,0,0,0)
                  - width: 60px
                icon:
                  - color: '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
                  - width: 16px
                  - height: 16px
                  - margin-top: -2px
                  - margin-left: 8px
                name:
                  - color: '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
                  - font-size: 16px
    主数值:
      card:
        type: custom:button-card
        label: '[[[ return Math.round(states[variables.pm25]?.state,0) ]]]'
        show_label: true
        styles:
          card:
            - border-width: 0
            - background: rgb(0,0,0,0)
            - margin-top: 405px
          label:
            - color: '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
            - font-size: 45px
    单位:
      card:
        type: custom:button-card
        label: µg/m³
        show_label: true
        styles:
          card:
            - border-width: 0
            - background: rgb(0,0,0,0)
            - margin-top: 423px
            - margin-left: -5px
          label:
            - color: '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
            - font-size: 14px
    减按钮:
      card:
        type: custom:button-card
        icon: 'mdi:minus'
        styles:
          card:
            - margin-top: 580px
            - width: 50px
            - height: 50px
            - border-radius: 25px
            - border: '[[[ return variables.主题 =="on" ? "2px solid rgb(150,150,150)" : "2px solid rgb(180,180,180)" ]]]'
            - margin-left: '27px'
            - --mdc-ripple-color: white
            - --mdc-ripple-press-opacity: 0.3
            - background: rgb(0,0,0,0)
          icon:
            - width: 25px
            - height: 25px
            - color: '[[[ return variables.主题 =="on" ? "rgb(150,150,150)" : "rgb(180,180,180)"; ]]]'
        tap_action:
          action: call-service
          service: number.set_value
          data:
            value: '[[[ return states[variables.风速]?.state-(1) ]]]'
          target:
            entity_id: '[[[ return  variables.风速 ?? ""]]]'
    加按钮:
      card:
        type: custom:button-card
        icon: 'mdi:plus'
        styles:
          card:
            - margin-top: 580px
            - width: 50px
            - height: 50px
            - border-radius: 25px
            - border: '[[[ return variables.主题 =="on" ? "2px solid rgb(150,150,150)" : "2px solid rgb(180,180,180)" ]]]'
            - margin-left: '12px'
            - --mdc-ripple-color: white
            - --mdc-ripple-press-opacity: 0.3 
            - background: rgb(0,0,0,0)
          icon:
            - width: 25px
            - height: 25px
            - color: '[[[ return variables.主题 =="on" ? "rgb(150,150,150)" : "rgb(180,180,180)"; ]]]'
        tap_action:
          action: call-service
          service: number.set_value
          data:
            value: '[[[ return states[variables.风速]?.state-(-1) ]]]'
          target:
            entity_id: '[[[ return  variables.风速 ?? ""]]]' 
    按钮一:
      card:
        type: custom:button-card
        show_icon: true
        icon: mdi:fan
        styles:
          card:
            - margin-top: 720px
            - width: 132px
            - height: 42px 
            - border-radius: 10px
            - border-width: 0
            - background: |
                [[[ 
                    var state = states[variables.净化器]?.state;
                    var pm = states[variables.pm25]?.state;
                    if(state=='on' && pm< 100) return 净化器switch颜色;
                    if(state=='on' && pm>=100) return 净化器switch警告颜色;
                    return "rgb(0,0,0,0)" ;
                ]]]
          icon:
            - width: 20px
            - height: 20px
            - color: '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
        tap_action:
          action: call-service
          service: switch.turn_on
          target:
            entity_id: '[[[ return  variables.净化器 ?? "" ]]]'
    按钮二:
      card:
        type: custom:button-card
        show_icon: true
        icon: mdi:power
        styles:
          card:
            - margin-top: 720px
            - width: 132px
            - height: 42px 
            - border-radius: 10px
            - border-width: 0
            - background: |
                [[[
                    var state = states[variables.净化器]?.state;
                    if(state=='off') return variables.主题 =="on" ? "rgb(180,180,180)" : "rgb(150,150,150)";
                    return "rgb(0,0,0,0)";
                ]]]
          icon:
            - width: 20px
            - height: 20px
            - color: '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
        tap_action:
          action: call-service
          service: switch.turn_off
          target:
            entity_id: '[[[ return  variables.净化器 ?? ""]]]'
    按钮三:
      card:
        type: custom:button-card
        show_icon: true
        show_label: true
        label: 自动
        icon: mdi:fan-auto
        styles:
          card:
            - margin-top: 830px
            - width: 88px
            - height: 42px 
            - border-radius: 10px
            - border-width: 0
            - background: |
                [[[
                    var state = states[variables.净化器]?.state;
                    var pm = states[variables.pm25]?.state;
                    var select = states[variables.模式]?.state;
                    if(state=='on' && select=='自动' && pm< 100) return 净化器switch颜色;
                    if(state=='on' && select=='自动' && pm>=100) return 净化器switch警告颜色;
                    if(state=='off' && select=='自动' ) return variables.主题 =="on" ? "rgb(180,180,180)" : "rgb(150,150,150)";
                    return "rgb(0,0,0,0)";
                ]]]
          icon:
            - width: 20px
            - height: 20px
            - color: '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
          label:
            - color: '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
            - font-size: 11px
        tap_action:
          action: call-service
          service: select.select_option
          data:
            option: 自动
          target:
            entity_id: '[[[ return  variables.模式 ?? ""]]]'
    按钮四:
      card:
        type: custom:button-card
        show_icon: true
        show_label: true
        label: 睡眠
        icon: mdi:power-sleep
        styles:
          card:
            - margin-top: 830px
            - width: 88px
            - height: 42px 
            - border-radius: 10px
            - border-width: 0
            - background: |
                [[[
                    var state = states[variables.净化器]?.state;
                    var pm = states[variables.pm25]?.state;
                    var select = states[variables.模式]?.state;
                    if(state=='on' && select=='睡眠' && pm< 100) return 净化器switch颜色;
                    if(state=='on' && select=='睡眠' && pm>=100) return 净化器switch警告颜色;
                    if(state=='off' && select=='睡眠' ) return variables.主题 =="on" ? "rgb(180,180,180)" : "rgb(150,150,150)";
                    return "rgb(0,0,0,0)";
                ]]]
          icon:
            - width: 20px
            - height: 20px
            - color: '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
          label:
            - color: '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
            - font-size: 11px
        tap_action:
          action: call-service
          service: select.select_option
          data:
            option: 睡眠
          target:
            entity_id: '[[[ return  variables.模式 ?? ""]]]'
    按钮五:
      card:
        type: custom:button-card
        show_icon: true
        show_label: true
        label: '[[[return "最爱"+states[variables.风速]?.state+"级" ]]]' 
        icon: mdi:heart
        styles:
          card:
            - margin-top: 830px
            - width: 88px
            - height: 42px 
            - border-radius: 10px
            - border-width: 0
            - background: |
                [[[
                    var state = states[variables.净化器]?.state;
                    var pm = states[variables.pm25]?.state;
                    var select = states[variables.模式]?.state;
                    if(state=='on' && select=='最爱' && pm< 100) return 净化器switch颜色;
                    if(state=='on' && select=='最爱' && pm>=100) return 净化器switch警告颜色;
                    if(state=='off' && select=='最爱' ) return variables.主题 =="on" ? "rgb(180,180,180)" : "rgb(150,150,150)";
                    return "rgb(0,0,0,0)";
                ]]]
          icon:
            - width: 20px
            - height: 20px
            - color: '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
          label:
            - color: '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
            - font-size: 11px
        tap_action:
          action: call-service
          service: select.select_option
          data:
            option: 最爱
          target:
            entity_id: '[[[ return  variables.模式 ?? ""]]]'
    副背景:
      card:
        type: custom:button-card
        styles:
          grid:
            - grid-template-areas: |
                'b1' 'b2' 'b3' 'b4' 'b5' 'b6' 'b7' 
            - grid-template-columns: 60px
            - grid-template-rows: 0px 0px 0px 0px 0px 0px 0px
          card:
            - padding: 0
            - margin-top: 455px
            - width: 60px
            - height: 455px
            - border-radius: 15px
            - border-width: 0
            - background: '[[[ return variables.主题 =="on" ? "rgb(255,255,255)" : "rgb(50,50,50)" ]]]'
        custom_fields:
          b1:
            card:
              type: custom:button-card
              show_label: true
              show_icon: true
              icon: mdi:lightbulb-off-outline
              label: |
                [[[
                    if(variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                      var light =states[variables.指示灯]?.state;
                      if(light=='息屏' || light=='微亮' || light=='正常' ) return "息屏";
                      return "";
                    }
                ]]]
              styles:
                card:
                  - margin-top: |
                      [[[
                          if(variables.附加信息=='左侧' || variables.附加信息=='右侧') {
                            var light =states[variables.指示灯]?.state;
                            if(light=='息屏' || light=='微亮' || light=='正常' ) return "280px";
                            return "0px"
                          }
                      ]]]
                  - margin-left: 8px
                  - border-radius: 10px
                  - width: 42px
                  - height: 42px
                  - border-width: 0
                  - background:  |
                      [[[
                          if(variables.附加信息=='左侧' || variables.附加信息=='右侧') {
                            var light =states[variables.指示灯]?.state;
                            if(light=='息屏' || light=='微亮' || light=='正常') return variables.主题 =="on" ? "rgb(230,230,230)" : "rgb(80,80,80)";
                            return "rgb(0,0,0,0)";
                          }
                      ]]]
                label:
                  - font-size: 11px
                  - color: |
                      [[[
                          if(variables.附加信息=='左侧' || variables.附加信息=='右侧') {
                            var light =states[variables.指示灯]?.state;
                            if(light=='正常' || light=='息屏' || light=='微亮' ) return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)"
                            return 'rgb(0,0,0,0)';
                          }
                      ]]]
                icon:
                  - color: |
                      [[[
                          if (variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                            var light =states[variables.指示灯]?.state;
                            if(light=='息屏') return 净化器switch颜色;
                            if(light=='微亮' || light=='正常' ) return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)"
                            return 'rgb(0,0,0,0)';
                          }
                      ]]]
              tap_action:
                action: call-service
                service: select.select_option
                data:
                  option: 息屏
                target:
                  entity_id: |
                    [[[ 
                        if (variables.附加信息=='左侧' || variables.附加信息=='右侧') {
                          return  variables.指示灯 ?? "";
                        }
                    ]]]
          b2:
            card:
              type: custom:button-card
              icon: mdi:lightbulb-on-50
              show_icon: true
              show_label: true
              label: |
                [[[
                    if(variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                      var light =states[variables.指示灯]?.state;
                      if(light=='息屏' || light=='微亮' || light=='正常' ) return "微亮";
                      return "";
                    }
                ]]]
              styles:
                card:
                  - margin-top: |
                      [[[
                          if(variables.附加信息=='左侧' || variables.附加信息=='右侧') {
                            var light =states[variables.指示灯]?.state;
                            if(light=='息屏' || light=='微亮' || light=='正常' ) return "390px";
                            return "0px"
                          }
                      ]]]
                  - margin-left: 8px
                  - border-radius: 10px
                  - width: 42px
                  - height: 42px
                  - border-width: 0
                  - background:  |
                      [[[
                          if(variables.附加信息=='左侧' || variables.附加信息=='右侧') {
                            var light =states[variables.指示灯]?.state;
                            if(light=='息屏' || light=='微亮' || light=='正常') return variables.主题 =="on" ? "rgb(230,230,230)" : "rgb(80,80,80)";
                            return "rgb(0,0,0,0)";
                          }
                      ]]]
                label:
                  - font-size: 11px
                  - color: |
                      [[[
                          if(variables.附加信息=='左侧' || variables.附加信息=='右侧') {
                            var light =states[variables.指示灯]?.state;
                            if(light=='正常' || light=='息屏' || light=='微亮' ) return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)"
                            return 'rgb(0,0,0,0)';
                          }
                      ]]]
                icon:
                  - color: |
                      [[[
                          if (variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                            var light =states[variables.指示灯]?.state;
                            if(light=='微亮') return 净化器switch颜色;
                            if(light=='息屏' || light=='正常' ) return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)"
                            return 'rgb(0,0,0,0)';
                          }
                      ]]]
              tap_action:
                action: call-service
                service: select.select_option
                data:
                  option: 微亮
                target:
                  entity_id: |
                    [[[ 
                        if (variables.附加信息=='左侧' || variables.附加信息=='右侧') {
                          return  variables.指示灯 ?? "";
                        }
                    ]]]
          b3:
            card:
              type: custom:button-card
              icon: mdi:lightbulb-on
              show_icon: true
              show_label: true
              label: |
                [[[
                    if(variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                      var light =states[variables.指示灯]?.state;
                      if(light=='息屏' || light=='微亮' || light=='正常' ) return "正常";
                      return "";
                    }
                ]]]
              styles:
                card:
                  - margin-top: |
                      [[[
                          if(variables.附加信息=='左侧' || variables.附加信息=='右侧') {
                            var light =states[variables.指示灯]?.state;
                            if(light=='息屏' || light=='微亮' || light=='正常' ) return "500px";
                            return "0px"
                          }
                      ]]]
                  - margin-left: 8px
                  - border-radius: 10px
                  - width: 42px
                  - height: 42px
                  - border-width: 0
                  - background:  |
                      [[[
                          if(variables.附加信息=='左侧' || variables.附加信息=='右侧') {
                            var light =states[variables.指示灯]?.state;
                            if(light=='息屏' || light=='微亮' || light=='正常') return variables.主题 =="on" ? "rgb(230,230,230)" : "rgb(80,80,80)";
                            return "rgb(0,0,0,0)";
                          }
                      ]]]
                label:
                  - font-size: 11px
                  - color: |
                      [[[
                          if(variables.附加信息=='左侧' || variables.附加信息=='右侧') {
                            var light =states[variables.指示灯]?.state;
                            if(light=='正常' || light=='息屏' || light=='微亮' ) 
                              return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)"
                            return 'rgb(0,0,0,0)';
                          }
                      ]]]
                icon:
                  - color: |
                      [[[
                          if (variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                            var light =states[variables.指示灯]?.state;
                            if(light=='正常') return 净化器switch颜色;
                            if(light=='息屏' || light=='微亮' ) return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)"
                            return 'rgb(0,0,0,0)';
                          }
                      ]]]
              tap_action:
                action: call-service
                service: select.select_option
                data:
                  option: 正常
                target:
                  entity_id: |
                    [[[ 
                        if (variables.附加信息=='左侧' || variables.附加信息=='右侧') {
                          return  variables.指示灯 ?? "";
                        }
                    ]]]
          b4: 
            card:
              type: custom:button-card 
              icon: |
                [[[ 
                    if (variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                      var locked =states[variables.按键锁]?.state;
                      if(locked=='on' ) return "mdi:lightbulb-on";
                      return "mdi:lightbulb-off";
                    }
                ]]]
              show_icon: true
              show_label: true
              label: |
                [[[
                    if (variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                      var light =states[variables.指示灯]?.state;
                      if(light=='on' || light=='off') return "指示灯";
                      return "";
                    }
                ]]]
              styles:
                card:
                  - margin-top: |
                      [[[
                          if (variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                            var light =states[variables.指示灯]?.state;
                            if(light=='on' || light=='off' ) return "500px";
                            return "0px";
                          }
                      ]]]
                  - margin-left: 8px
                  - border-radius: 10px
                  - width: 42px
                  - height: 42px
                  - border-width: 0
                  - background:  |
                      [[[
                          if (variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                            var light =states[variables.指示灯]?.state;
                            if(light=='on' || light=='off' ) return variables.主题 =="on" ? "rgb(230,230,230)" : "rgb(80,80,80)";
                            return "rgb(0,0,0,0)";
                          }
                      ]]]
                label:
                  - font-size: 11px
                  - color: |
                      [[[
                          if (variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                            var light =states[variables.指示灯]?.state;
                            if(light=='on' || light=='off' ) return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)"
                            return 'rgb(0,0,0,0)';
                          }
                      ]]]
                icon:
                  - color: |
                      [[[
                          if (variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                            var light =states[variables.指示灯]?.state;
                            if(light=='on' ) return 净化器switch颜色;
                            if(light=='off') return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)"
                            return 'rgb(0,0,0,0)';
                          }
                      ]]]
              tap_action:
                action: call-service
                service: light.toggle
                data: {}
                target:
                  entity_id: |
                    [[[ 
                        if (variables.附加信息=='左侧' || variables.附加信息=='右侧') {
                          return  variables.指示灯 ?? "";
                        }
                    ]]]
          b5:
            card:
              type: custom:button-card
              icon: |
                [[[ 
                    if (variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                      var alarm =states[variables.提示音]?.state;
                      if(alarm=='on' ) return "mdi:volume-high";
                      if(alarm=='off') return "mdi:volume-mute";
                    }
                ]]]
              show_icon: true
              show_label: true
              label: 提示音
              styles: 
                card:
                  - margin-top: 610px
                  - margin-left: 8px
                  - border-radius: 10px
                  - width: 42px
                  - height: 42px
                  - border-width: 0
                  - background: '[[[ return variables.主题 =="on" ? "rgb(230,230,230)" : "rgb(80,80,80)" ]]]'     
                label:
                  - font-size: 11px
                  - color:  '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
                icon:
                  - color: | 
                      [[[
                          if (variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                            var alarm =states[variables.提示音]?.state;
                            if(alarm=='on' ) return 净化器switch颜色;
                            return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)"
                          }
                      ]]]
              tap_action:
                action: call-service
                service: switch.toggle
                data: {} 
                target:
                  entity_id: |
                    [[[ 
                        if (variables.附加信息=='左侧' || variables.附加信息=='右侧') {
                          return  variables.提示音 ?? "";
                        }
                    ]]]
          b6:
            card:
              type: custom:button-card
              icon: |
                [[[ 
                    if (variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                      var locked =states[variables.按键锁]?.state;
                      if(locked=='on' ) return "mdi:lock-open";
                      if(locked=='off') return "mdi:lock-open-variant";
                    }
                ]]]
              show_icon: true
              show_label: true
              label: 按键锁
              styles:
                card:
                  - margin-top: 720px
                  - margin-left: 8px
                  - border-radius: 10px
                  - width: 42px
                  - height: 42px
                  - border-width: 0
                  - background: '[[[ return variables.主题 =="on" ? "rgb(230,230,230)" : "rgb(80,80,80)" ]]]'     
                label:
                  - font-size: 11px
                  - color: '[[[ return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)" ]]]'
                icon: 
                  - color: |
                      [[[
                          if (variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                            var locked =states[variables.按键锁]?.state;
                            if(locked=='on' ) return 净化器switch颜色;
                            return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)"
                          }
                      ]]]
              tap_action:
                action: call-service
                service: switch.toggle
                data: {}
                target:
                  entity_id: |
                    [[[ 
                        if (variables.附加信息=='左侧' || variables.附加信息=='右侧') {
                          return  variables.按键锁 ?? "";
                        }
                    ]]]
          b7:
            card:
              type: custom:button-card
              show_label: true
              label: |
                [[[
                    if (variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                      return states[variables.滤芯剩余比]?.state +"%"+"<br>"+"滤芯"
                    }
                ]]]
              styles:
                card:
                  - margin-top: 830px
                  - margin-left: 8px
                  - border-radius: 10px
                  - width: 42px
                  - height: 42px
                  - border-width: 0
                  - background:  '[[[ return variables.主题 =="on" ? "rgb(230,230,230)" : "rgb(80,80,80)" ]]]'     
                label:
                  - font-size: 11px
                  - color: |
                      [[[
                          if (variables.附加信息=='左侧' || variables.附加信息=='右侧'){
                            var lvxin =states[variables.滤芯剩余比]?.state;
                            if( lvxin<10 ) return 净化器switch颜色;
                            return variables.主题 =="on" ? "rgb(0,0,0)" : "rgb(255,255,255)"
                          }
                      ]]] 