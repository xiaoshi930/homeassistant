洗碗机卡片:
  triggers_update:
    - '[[[ return variables.洗碗机 ?? ""]]]'
    - '[[[ return variables.电源开关 ?? ""]]]'
    - '[[[ return variables.保管 ?? ""]]]'
    - '[[[ return variables.童锁 ?? ""]]]'
    - '[[[ return variables.剩余时间 ?? ""]]]'
    - '[[[ return variables.门状态 ?? ""]]]'
    - '[[[ return variables.漂洗计状态 ?? ""]]]'
    - '[[[ return variables.洗碗盐状态 ?? ""]]]'
  tap_action:
    action: none
  hold_action:
    action: none
  styles:
    grid:
      - grid-template-areas: >
          [[[
              window.洗碗机颜色 = "rgb(0,188,213)";  
              if(variables.洗碗机 !="none"){
                  return `"背景 背景 背景 背景"
                          "名称 名称 状态 开关"
                          "图标 空白区域 主按钮区域 主按钮区域"`
              } 
               if(variables.洗碗机 =="none"){
                  return `` 
              }  
          ]]]  
      - grid-template-columns: 13% 14% 61% 12%
      - grid-template-rows: 0 8vw 12vw
    card:
      - padding: 0
      - cursor: none
      - --mdc-ripple-press-opacity: 0
      - height: |
          [[[ 
              if( variables.洗碗机 !="none") {
                return "calc(20vw + 8px);"
              } 
              else return "0";
          ]]]
      - display: |
          [[[
              if (variables.洗碗机 == "none") {
                  return "none";
              }
          ]]]
  custom_fields:
    背景:
      card:
        type: custom:button-card
        styles:
          card:
            - margin-top: 20vw
            - padding: 0
            - border-width: 0
            - cursor: none
            - --mdc-ripple-press-opacity: 0
            - border-radius: 3vw
            - height: 20vw
            - background: | 
                [[[
                    var state = states[variables.电源开关]?.state;
                    if( variables.主题=='on'  && state =='on')  return "linear-gradient(135deg, "+洗碗机颜色+" -50%,rgb(255,255,255) 50%)";
                    if( variables.主题=='off' && state =='on')  return "linear-gradient(135deg, "+洗碗机颜色+" -50%,rgb(50,50,50) 50%)";
                    return variables.主题 == "on" ? "rgb(255,255,255)" : "rgb(50,50,50)";
                ]]]
    开关:
      card:
        type: custom:button-card
        tap_action:
          action: call-service
          service: switch.turn_off
          data: {}
          target:
            entity_id: '[[[ return  variables.电源开关 ?? ""]]]'
        show_name: false
        show_icon: true
        icon: |
          [[[       
              var state = states[variables.电源开关]?.state;
              if( state =='on') return "mdi:toggle-switch";
              return "mdi:toggle-switch-off";
          ]]]
        styles:
          card:
            - cursor: none
            - --mdc-ripple-press-opacity: 0.2
            - padding: 0
            - border-radius: 2vw
            - width: 8vw
            - height: 8vw
            - border-width: 0
            - background: rgb(0,0,0,0)
          icon:
            - width: 8vw
            - height: 8vw  
            - color: |
                [[[
                    var state = states[variables.电源开关]?.state;
                    if( state =='on') return 洗碗机颜色;
                    return variables.主题 == "on" ? "rgb(50,50,50)" : "rgb(255,255,255)";
                ]]] 
    图标:
      card:
        type: custom:button-card
        show_icon: true
        icon: |
          [[[ 
              var state = states[variables.电源开关]?.state;   
              if( state =='on')  return "mdi:fan";
              return "mdi:fan-off";  
          ]]] 
        styles:
          card:
            - padding: 0
            - border-radius: 0
            - width: 20vw 
            - height: 20vw
            - margin-left: '-2vw'
            - border-width: 0
            - background: rgb(0,0,0,0)
          icon: 
            - color: |
                [[[
                    var state = states[variables.电源开关]?.state;
                    if( state =='on') return 洗碗机颜色;
                    return variables.主题 == "on" ? "rgb(50,50,50)" : "rgb(255,255,255)";
                ]]]
            - animation: |
                [[[ 
                    var state = states[variables.电源开关]?.state;   
                    if( state =='on')  return "rotating 1.5s linear infinite";
                    return "";   
                ]]]
    名称:
      card:
        type: custom:button-card
        show_label: true
        label: '[[[ return states[variables.洗碗机]?.attributes.friendly_name ?? "名称"]]]'
        styles:
          card:
            - padding: 0
            - border-radius: 0
            - width: 50vw
            - margin-left: 2.5vw
            - border-width: 0
            - background: rgb(0,0,0,0)
          label:
            - justify-self: start
            - font-size: 4vw
            - font-weight: bold
            - color: '[[[ return variables.主题 == "on" ? "rgb(50,50,50)" : "rgb(255,255,255)"; ]]]'
    状态:  
      card:
        type: custom:button-card
        label: |
          [[[ 
              var state = states[variables.电源开关]?.state;
              if( state =='on') return "洗碗中";
              if( state =='off') return "待机中";
              return state ? state : "离线";  
          ]]]
        show_label: true
        styles: 
          card:
            - padding: 0 
            - border-radius: 0
            - border-width: 0
            - background: rgb(0,0,0,0)
          label:
            - justify-self: start
            - font-size: 3vw
            - font-weight: bold
            - margin-top: 0.5vw
            - color: '[[[ return variables.主题 == "on" ? "rgb(50,50,50)" : "rgb(255,255,255)"; ]]]'           
    主按钮区域:
      card:
        type: custom:button-card
        tap_action:
          action: none
        hold_action:
          action: none
        styles:
          grid:
            - grid-template-areas: |
                'b1 b2 b3 b4 b5' 
            - grid-template-columns: 20% 20% 20% 20% 20% 
            - grid-template-rows: 100%
          card:
            - cursor: none  
            - width: 66vw
            - padding: 0
            - border-radius: 0
            - border-width: 0
            - background: rgb(0,0,0,0)
        custom_fields:
          b1:
            card:
              type: custom:button-card
              template: 洗碗机按钮样式模板
              icon: mdi:repeat-variant
              name: 保管 
              variables:
                主题: '[[[ return variables.主题 ?? ""]]]'
              styles:
                name: 
                  - color: | 
                      [[[
                          if( states[variables.保管]?.state == "on") return 洗碗机颜色;
                          return "rgb(255,255,255)";
                      ]]]
                icon: 
                  - color: | 
                      [[[
                          if( states[variables.保管]?.state == "on") return 洗碗机颜色;
                          return "rgb(255,255,255)";
                      ]]]
              tap_action:
                action: call-service
                service: switch.toggle
                data: {}
                target:
                  entity_id: '[[[ return  variables.保管 ?? ""]]]'
          b2:
            card:
              type: custom:button-card
              template: 洗碗机按钮样式模板
              icon: |
                [[[
                    if(states[variables.童锁]?.state=="locked") return "mdi:lock-open";
                    if(states[variables.童锁]?.state=="unlocked") return "mdi:lock-open-variant";
                    return "mdi:lock-open-variant";
                ]]]
              name: 童锁
              variables:
                主题: '[[[ return variables.主题 ?? ""]]]'
              styles:
                name: 
                  - color: | 
                      [[[
                          if( states[variables.童锁]?.state == "locked") return 洗碗机颜色;
                          return "rgb(255,255,255)";
                      ]]]
                icon: 
                  - color: | 
                      [[[
                          if( states[variables.童锁]?.state == "locked") return 洗碗机颜色;
                          return "rgb(255,255,255)";
                      ]]]
              tap_action:
                action: call-service
                service: switch.toggle
                data: {}
                target:
                  entity_id: '[[[ return  variables.童锁 ?? ""]]]'
          b3:
            card:
              type: custom:button-card
              template: 洗碗机按钮样式模板
              icon: mdi:box-shadow
              name: 门
              variables:
                主题: '[[[ return variables.主题 ?? ""]]]'
              styles:
                name: 
                  - color: | 
                      [[[
                          if( states[variables.门状态]?.state == "on") return 洗碗机颜色;
                          return "rgb(255,255,255)";
                      ]]]
                icon: 
                  - color: | 
                      [[[
                          if( states[variables.门状态]?.state == "on") return 洗碗机颜色;
                          return "rgb(255,255,255)";
                      ]]]
          b4:
            card:
              type: custom:button-card
              template: 洗碗机按钮样式模板
              variables:
                主题: '[[[ return variables.主题 ?? ""]]]'
              icon: mdi:bottle-tonic
              name: |
                [[[ 
                    if(states[variables.漂洗计状态]?.state=="on") return "缺少";
                    if(states[variables.漂洗计状态]?.state=="off") return "充足";
                    return "";
                ]]]
          b5:
            card:
              type: custom:button-card
              template: 洗碗机按钮样式模板
              variables:
                主题: '[[[ return variables.主题 ?? ""]]]'
              icon: mdi:drag
              name: |
                [[[ 
                    if(states[variables.洗碗盐状态]?.state=="on") return "缺少";
                    if(states[variables.洗碗盐状态]?.state=="off") return "充足";
                    return "";
                ]]]
  
洗碗机按钮样式模板:
  triggers_update:
    - '[[[ return variables.洗碗机 ?? ""]]]'
    - '[[[ return variables.电源开关 ?? ""]]]'
    - '[[[ return variables.保管 ?? ""]]]'
    - '[[[ return variables.童锁 ?? ""]]]'
    - '[[[ return variables.剩余时间 ?? ""]]]'
    - '[[[ return variables.门状态 ?? ""]]]'
    - '[[[ return variables.漂洗计状态 ?? ""]]]'
    - '[[[ return variables.洗碗盐状态 ?? ""]]]'
  layout: icon_name
  show_icon: true 
  show_name: true 
  styles: 
    card:
      - cursor: none
      - --mdc-ripple-press-opacity: 0.2
      - width: 12.2vw
      - height: 6vw
      - border-radius: 1.5vw 
      - background: '[[[ return variables.主题 == "on" ? "rgb(50,50,50)" : "rgb(120,120,120)"; ]]]'
    name:
      - color: rgb(255,255,255)
      - font-size: 0.9vh
      - margin-left: -2vw
      - font-weight: bold
    icon:
      - width: 3vw
      - height: 3vw
      - margin-left: 0vw
      - color: rgb(255,255,255)

