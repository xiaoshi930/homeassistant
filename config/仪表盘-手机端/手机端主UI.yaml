kiosk_mode:
  hide_header: true
  hide_sidebar: true 
button_card_templates:
  !include_dir_merge_named "/config/仪表盘-手机端/button卡片模板" #引用该文件夹下所 有文件作为button模板
apexcharts_card_templates:
  !include_dir_merge_named "/config/仪表盘-手机端/apexcharts卡片模板" #引用该文件夹下所有文件作为apexcharts模板
views:   
  - type: custom:button-card     
    template: 全局函数                  
    triggers_update: all  
    styles:                                                    
      card:                 
        - function: |                 
            [[[   
                window.name1    = "男主人";                         /* HA的用户名 */
                window.number1  = "number.theme_phone_mode_1";   /* 集成https://github.com/xiaoshi930/xiaoshi_theme生成的实体 */
                window.switch1  = "switch.theme_phone_mode_1";   /* 集成https://github.com/xiaoshi930/xiaoshi_theme生成的实体 */
                window.name2    = "女主人";                       /* HA的用户名 */
                window.number2  = "number.theme_phone_mode_2";   /* 集成https://github.com/xiaoshi930/xiaoshi_theme生成的实体 */
                window.switch2  = "switch.theme_phone_mode_2";   /* 集成https://github.com/xiaoshi930/xiaoshi_theme生成的实体 */
                     
                window.weather1 = "weather.nan_zhu_ren";         /*  个人1天气实体  */
                window.weather2 = "weather.nv_zhu_ren";         /*  个人2天气实体  */
                window.weatherh = "weather.wo_de_jia";           /*  家天气实体     */
                window.weathers = "weather.sou_suo_cheng_shi";   /*  搜索天气实体   */
  
                window.温度颜色 = "rgb(190,0,50)";
                window.湿度颜色 = "rgb(76,141,174)"; 
                window.PM25颜色 = "rgb(22,169,81)";   
                window.灯光按钮开启颜色 = "rgb(255,155,0)"; 
                window.设备按钮开启颜色 = "rgb(10,170,10)"; 
                window.媒体按钮开启颜色 = "rgb(190,80,220)";
                window.按钮关闭颜色 = "rgb(150,150,150)";
            ]]]   
        - background: |    
            [[[  
                if (hass.user.name == name1){
                    return states[number1]?.state <= 2 ? theme_color(230,0,1) : "rgb(0,0,0,0)";
                }
                if (hass.user.name == name2){
                    return states[number2]?.state <= 2 ? theme_color(230,0,1) : "rgb(0,0,0,0)";
                }
                return "rgb(0,0,0,0)";
            ]]]
      grid:
        - grid-template-areas: |
            [[[
                if (hass.user.name == name1) {
                    var count = states[number1]?.state;
                    if (count == 1 || count == 2) return  grid_空白();
                    if (count == 3 || count == 4) return  grid_图片();
                    if (count == 5 || count == 6) return  grid_视频();
                    if (count == 7 || count == 8) return  grid_全屏视频();
                }  
                if (hass.user.name == name2) {
                    var count = states[number2]?.state; 
                    if (count == 1 || count == 2) return  grid_空白();
                    if (count == 3 || count == 4) return  grid_图片();
                    if (count == 5 || count == 6) return  grid_视频();
                    if (count == 7 || count == 8) return  grid_全屏视频();
                }
                return  grid_空白(); 
            ]]]         
        - grid-template-columns: 6vw 47vw 33vw 10vw   
        - grid-template-rows: |
            [[[ 
                if (hass.user.name == name1) {
                    return states[number1]?.state <= 6 ? "0vh 0vh 0vh 0vh 13vh 4vh 20vh 20vh 20vh 20vh 1.5vh" : "0vh 0vh 0vh 0vh 100vh"; 
                }
                if (hass.user.name == name2) {
                    return states[number2]?.state <= 6 ? "0vh 0vh 0vh 0vh 13vh 4vh 20vh 20vh 20vh 20vh 1.5vh" : "0vh 0vh 0vh 0vh 100vh"; 
                }
                return "0vh 0vh 0vh 0vh 13vh 4vh 20vh 20vh 20vh 20vh 1.5vh"; 
            ]]]
    custom_fields: 
      图片:
        card:  
          type: custom:xiaoshi-phone-image-card
          top: 50vh
          url:
            - "https://api.yviii.com/img/baisi/"
            - "https://api.yviii.com/img/heisi/" 
            - "https://api.suyanw.cn/api/jk.php/"
            - "https://api.suyanw.cn/api/hs.php/"
            - "https://api.suyanw.cn/api/ksxjj.php/"
            - "https://api.suyanw.cn/api/sjmv.php/"
      视频:
        card:
          type: custom:xiaoshi-phone-video-card 
          top: 50vh
          url:
            - "https://api.yviii.com/video/i.php"  
      表头:
        card:
          type: custom:button-card
          template: UI表头主模板
          function: | 
            [[[
                const 按钮宽度1= "65px";
                const 按钮宽度2= "65px";
                if (hass.user.name == name1) {
                    return window.button_width = 按钮宽度1;
                }
                if (hass.user.name == name2) {
                    return window.button_width = 按钮宽度2;
                }
            ]]]
          custom_fields: 
            头像1: 
              card:  
                type: custom:button-card
                template: UI表头_头像
                variables:
                  人员实体: person.renyuan_a
                  人员ip实体: device_tracker.ip_renyuan_a            ## 来源于集成Ping(ICMP),需要手动启用实体
                  人员app实体: device_tracker.app_renyuan_a
                  人员app电量: sensor.renyuan_a_dian_chi_dian_liang
                  人员回家时间: sensor.gaode_renyuan_a           ## 来源于NR高德数据【如不需要可以删除这行】
                  万年历:
                    实体: sensor.lunar_calendar  ## NR万年历
                    位置: 0             ## NR万年历中生日的位置
                  电话费:
                    - sensor.tel199_2769 
                    - sensor.tel195_0769  
                    - sensor.tel_api  
            头像2:
              card:
                type: custom:button-card
                template: UI表头_头像    
                variables: 
                  人员实体: person.renyuan_b 
                  人员ip实体: device_tracker.ip_renyuan_b             ## 来源于集成Ping(ICMP),需要手动启用实体
                  人员app实体: device_tracker.app_renyuan_b  
                  人员app电量: sensor.renyuan_b_dian_chi_dian_liang     
                  人员回家时间: sensor.gaode_renyuan_b            ## 来源于NR高德数据【如不需要可以删除这行】
                  万年历: 
                    实体: sensor.lunar_calendar   ## NR万年历
                    位置: 1              ## NR万年历中生日的位置 
                  电话费:
                    - sensor.tel137_9221 
                    - sensor.tel182_7461 
            天气:      
              card:     
                type: custom:button-card
                template: UI表头_天气
            温度:        
              card:      
                type: custom:button-card 
                template: UI表头_温度  
                variables:  
                  室外温度: sensor.wendu_shiwai
            湿度:
              card:  
                type: custom:button-card   
                template: UI表头_湿度
                variables: 
                  室外湿度: sensor.shidu_shiwai
            电费:  
              card: 
                type: custom:button-card    
                entity: sensor.state_grid_6103518118537   
                template: UI表头_电费 
            水费:       
              card:  
                type: custom:button-card  
                entity: sensor.xian_water
                template: UI表头_水费
                variables:    
                  水费: sensor.xian_water
            燃气:   
              card:  
                type: custom:button-card   
                entity: sensor.xian_gas
                template: UI表头_燃气
                variables:    
                  燃气: sensor.xian_gas   
            话费:   
              card:    
                type: custom:xiaoshi-balance-button
                theme: '[[[ return theme() ]]]'       
                button_width: '[[[ return button_width ]]]'
                global_warning: <30
                entities:
                  - entity_id: sensor.tel_api
                  - entity_id: sensor.tel199_2769
                  - entity_id: sensor.tel195_0769
                  - entity_id: sensor.tel137_9221 
                  - entity_id: sensor.tel182_7461
                other_cards: |-
                  - type: custom:xiaoshi-petrochina-card
                    entities: 
                      - sensor.fuel_price_shaanxi
            HA信息:
              card: 
                type: custom:xiaoshi-ha-info-button
                theme: '[[[ return theme() ]]]'  
                button_width: '[[[ return button_width ]]]'
                exclude_devices:
                  - 循环扇
                exclude_entities:
                  - "weather.sou_suo_cheng_shi"
            待办:     
              card:     
                type: custom:xiaoshi-todo-button
                theme: '[[[ return theme() ]]]'  
                button_width: '[[[ return button_width ]]]'
                entities:
                  - todo.item 

      主题按钮:                      
        card:           
          type: custom:button-card    
          template: UI表体_主题按钮     
      预留按钮1: ""  
      预留按钮2: ""      

      动态区域:        
        card:                    
          type: custom:button-card    
          triggers_update: all           
          template: UI动态区域
          variables:              
            显示: 自动隐藏    ## 【总是显示】或者【自动隐藏】
            常驻显示: ['耗材']  ## ['灯光','动态1','动态2']

            ## 灯光预制 
            耗材:   
              entities:
                - entity_id: sensor.dianliang_wenduji_zhuwo
                - entity_id: sensor.dianliang_wenduji_ciwo
                - entity_id: sensor.dianliang_wenduji_ertongfang
                - entity_id: sensor.dianliang_wenduji_zhuwei
                - entity_id: sensor.dianliang_wenduji_gongwei
                - entity_id: sensor.dianliang_wenduji_chufang
                - entity_id: event.dianliang_wenduji_shiwai
                - entity_id: sensor.dianliang_chuanganqi_xuanguanrenti
                - entity_id: sensor.dianliang_chufangshuiqin
                - entity_id: sensor.dianliang_chuanganqi_chufangrenti
                - entity_id: sensor.dianliang_mensuo
                - entity_id: sensor.dianliang_chuanganqi_ketingmenchuang
                - entity_id: event.dianliang_menling
                - entity_id: event.dianliang_chuanganqi_zhuwomenchuang
                - entity_id: sensor.dianliang_yashua_renyuan_b
                - entity_id: sensor.haocai_jingshuiqi_ro
                  overrides:
                    conversion: /172.80
                    unit_of_measurement: "%"
                - entity_id: sensor.dianliang_yashua_renyuan_a
                - entity_id: sensor.haocai_jingshuiqi_3in1
                  overrides: 
                    conversion: /86.4
                    unit_of_measurement: "%"
                - entity_id: sensor.haocai_jinghuaqi_lvxin_keting
                - entity_id: binary_sensor.haocai_xiwanji_piaoxiji
                - entity_id: sensor.haocai_jinghuaqi_lvxin_zhuwo
                - entity_id: binary_sensor.haocai_xiwanji_xiwanyan
                - entity_id: sensor.dianlaing_zhuwo_wuxiankaiguan
                - entity_id: sensor.haocai_saodijiqiren_zhushua
                - entity_id: sensor.dianliang_keting_wuxiankaiguan2
                - entity_id: sensor.haocai_saodijiqiren_bianshua
                - entity_id: sensor.dianliang_keting_wuxiankaiguan3
                - entity_id: sensor.haocai_saodijiqiren_lvxin
  
            ## 灯光预制
            灯光图标: mdi:ceiling-light  
            灯光颜色: rgb(233,150,0) 
            灯光:  
              - light.zhuwodeng     
              - light.zhuwomentingdeng     
              - light.taideng  
              - light.ketingdeng
              - light.ketingdengdai  
              - light.ketingtongdeng 
              - light.ketingzoulangdeng 
              - light.xuanguandeng 
              - light.wangguandeng
              - light.ertongfangdeng
              - light.xuexideng  
              - light.cantingdeng
              - light.cantingtongdeng
              - light.ciwodeng  
              - light.chufangdeng       
              - light.yuba_zhuwei_deng
              - light.zhuweijingqiandeng
              - light.yuba_gongwei_deng
              - light.gongweijingqiandeng

            ## 厨房设备预制
            厨房设备图标: mdi:countertop  
            厨房设备颜色: rgb(200,00,0)
            厨房设备:      
              - entity: sensor.chufang_dianfanbao
                states: ['烹饪中','保温中','预约中']
              - entity: sensor.chufang_dianyaliguo
                states: ['烹饪中','保温中','预约中']
              - entity: sensor.chufang_zhengzhuguo
                states: ['烹饪中','保温中','预约中']
              - entity: sensor.chufang_kongqizhaguo 
                states: ['烹饪中','预约中']
              - entity: sensor.chufang_pobiji
                states: ['Busy','Keep Warm']
              - entity: switch.180319907614846_power
                states: ['on']
              - entity: sensor.youyanji  ## 数值类，大于xx
                states: ['>10']  

            # 共预制了9个动态图标(动态1-动态9)
            动态1图标: mdi:laptop
            动态1颜色: rgb(33,150,213)
            动态1:    
              - entity: switch.diannao    
                states: ['on']
            动态2图标: mdi:air-conditioner
            动态2颜色: rgb(0,188,213)
            动态2:    
              - entity: climate.kongtiao_zhuwo
                states: ['cool','heat','dry','fan_only']
              - entity: climate.kongtiao_keting    
                states: ['cool','heat','dry','fan_only']
            动态3图标: mdi:fan   
            动态3颜色: rgb(0,188,213)
            动态3:  
              - entity: fan.xunhuanshan_ertongfang  
                states: ['on']       
            动态4图标: mdi:air-filter
            动态4颜色: rgb(76,191,104)   
            动态4:     
              - entity: fan.jinghuaqi_zhuwo   
                states: ['on']     
              - entity: fan.jinghuaqi_keting 
                states: ['on']   
            动态5图标: mdi:air-humidifier
            动态5颜色: rgb(30,144,255)
            动态5: 
              - entity: humidifier.jiashiqi_zhuwo  
                states: ['on']
              - entity: humidifier.jiashiqi_keting  
                states: ['on']   
            动态6图标: mdi:hvac
            动态6颜色: rgb(226,181,4)
            动态6: 
              - entity:  
                  - switch.yuba_gongwei_blow  ## 浴霸是混合实体
                  - switch.yuba_gongwei_vent
                  - switch.yuba_gongwei_heat1 
                states: ['on']   
              - entity:   
                  - switch.yuba_zhuwei_blow 
                  - switch.yuba_zhuwei_vent
                  - switch.yuba_zhuwei_heat1
                states: ['on']  
            动态7图标: mdi:radiator
            动态7颜色: rgb(226,81,4)  
            动态7: 
              - entity: climate.shuinuantan
                states: ['heat']    
            动态8图标: mdi:robot-vacuum
            动态8颜色: rgb(90,205,50)
            动态8:
              - entity: vacuum.saodijiqiren   
                states: ['正在拖地','正在扫地']   
            动态9图标: mdi:washing-machine
            动态9颜色: rgb(0,188,213)
            动态9: 
              - entity: select.xiyiji 
                states: ['启动']    
            动态10图标: mdi:multimedia
            动态10颜色: rgb(220,22,252)
            动态10: 
              - entity: media_player.yinxiang_keting_home     
                states: ['Playing','playing','播放中']
              - entity: media_player.yinxiang_zhuwo_home     
                states: ['Playing','playing','播放中']
          custom_fields:  ## 如果没有或者不需要对应的弹出菜单，删除对应的引用 ##
            动态1:  
              card:
                tap_action: !include "button卡片模板/动态区域弹出卡片/电脑弹出卡片.yaml"
            动态2: 
              card: 
                tap_action: !include "button卡片模板/动态区域弹出卡片/空调弹出卡片.yaml"
            动态3:  
              card: 
                tap_action: !include "button卡片模板/动态区域弹出卡片/风扇弹出卡片.yaml"
            动态4:
              card:
                tap_action: !include "button卡片模板/动态区域弹出卡片/净化器弹出卡片.yaml"
            动态5: 
              card:
                tap_action: !include "button卡片模板/动态区域弹出卡片/加湿器弹出卡片.yaml"
            动态6: 
              card:
                tap_action: !include "button卡片模板/动态区域弹出卡片/浴霸弹出卡片.yaml" 
            动态7: 
              card: 
                tap_action: !include "button卡片模板/动态区域弹出卡片/水暖毯弹出卡片.yaml"
            动态8: 
              card:
                tap_action: !include "button卡片模板/动态区域弹出卡片/扫地机器人弹出卡片.yaml"
            动态9: 
              card:
                tap_action: !include "button卡片模板/动态区域弹出卡片/洗衣机弹出卡片.yaml"
            动态10: 
              card:
                tap_action: !include "button卡片模板/动态区域弹出卡片/媒体弹出卡片.yaml"
            厨房设备: 
              card: 
                tap_action: !include "button卡片模板/动态区域弹出卡片/厨房设备弹出卡片.yaml"


      第1区域:      
        card:                 
          type: custom:button-card  
          triggers_update: all           
          template: UI表体          
          variables:      
            区域: 第1区域   
            名称: 主卧  
            图标: mdi:bed-king      
            温度: sensor.wendu_zhuwo    
            湿度: sensor.shidu_zhuwo 
            pm25: sensor.jinghuaqi_zhuwo_pm25
            灯光:    
              - light.zhuwodeng        
              - light.zhuwomentingdeng    
              - light.taideng     
            设备: 
              - entity: climate.kongtiao_zhuwo
                states: ['cool','heat','dry','fan_only']  #设备开启的状态列表
              - entity: fan.jinghuaqi_zhuwo
                states: ['on']   
              - entity: humidifier.jiashiqi_zhuwo
                states: ['on'] 
              - entity: climate.shuinuantan    
                states: ['heat']       
            媒体:   
              - entity: media_player.yinxiang_zhuwo_home     
                states: ['Playing','playing','播放中']
          custom_fields:  ## 如果没有或者不需要对应的弹出菜单，删除对应的引用 ##
            设备:
              card:
                tap_action: !include "button卡片模板/表体区域弹出卡片/第1区域设备.yaml"
            媒体: 
              card:
                tap_action: !include "button卡片模板/表体区域弹出卡片/第1区域媒体.yaml"
      第2区域:            
        card:           
          type: custom:button-card     
          triggers_update: all        
          template: UI表体           
          variables:
            区域: 第2区域           
            名称: 客厅       
            图标: mdi:sofa      
            温度: sensor.wendu_keting    
            湿度: sensor.shidu_keting
            pm25: sensor.jinghuaqi_keting_pm25   
            灯光:           
              - light.ketingdeng  
              - light.ketingdengdai   
              - light.ketingtongdeng       
              - light.ketingzoulangdeng     
              - light.xuanguandeng       
              - light.wangguandeng
            设备:      
              - entity: climate.kongtiao_keting   
                states: ['cool','heat','dry','fan_only']   
              - entity: switch.jinghuaqi_keting
                states: ['on']     
              - entity: humidifier.jiashiqi_keting
                states: ['on']
              - entity: switch.diannao
                states: ['on']
            媒体: 
              - entity: media_player.yinxiang_keting_home    
                states: ['idle','Playing','playing','播放中']
              - entity: media_player.yinxiang_zhuwo_miot 
                states: ['Playing','playing','播放中']
              - entity: media_player.dianshi_miot
                states: ['Playing','playing','播放中']
          custom_fields:  ## 如果没有或者不需要对应的弹出菜单，删除对应的引用 ##
            设备:
              card:
                tap_action: !include "button卡片模板/表体区域弹出卡片/第2区域设备.yaml"
            媒体: 
              card:
                tap_action: !include "button卡片模板/表体区域弹出卡片/第2区域媒体.yaml"
      第3区域:      
        card:     
          type: custom:button-card     
          triggers_update: all   
          template: UI表体           
          variables:   
            区域: 第3区域      
            名称: 儿童房 
            图标: mdi:bed-king  
            温度: sensor.wendu_ertongfang     
            湿度: sensor.shidu_ertongfang 
            灯光:     
              - light.ertongfangdeng 
              - light.xuexideng 
            设备:  
              - entity: fan.xunhuanshan_ertongfang  
                states: ['on']        
          custom_fields:  ## 如果没有或者不需要对应的弹出菜单，删除对应的引用 ##
            设备:
              card:
                tap_action: !include "button卡片模板/表体区域弹出卡片/第3区域设备.yaml"
      第4区域:          
        card:    
          type: custom:button-card           
          triggers_update: all    
          template: UI表体     
          variables: 
            区域: 第4区域        
            名称: 餐厅   
            图标: mdi:silverware-fork-knife
            温度: sensor.wendu_keting 
            湿度: sensor.shidu_keting
            灯光:     
              - light.cantingdeng
              - light.cantingtongdeng   
            设备:
              - entity: vacuum.saodijiqiren 
                states: ['正在拖地']
          custom_fields:  ## 如果没有或者不需要对应的弹出菜单，删除对应的引用 ## 
            设备:
              card:     
                tap_action: !include "button卡片模板/表体区域弹出卡片/第4区域设备.yaml"
      第5区域:
        card:
          type: custom:button-card
          triggers_update: all
          template: UI表体 
          variables:         
            区域: 第5区域     
            名称: 次卧  
            图标: mdi:bed-king 
            温度: sensor.wendu_ciwo         
            湿度: sensor.shidu_ciwo   
            灯光:            
              - light.ciwodeng     
      第6区域:
        card:
          type: custom:button-card
          triggers_update: all    
          template: UI表体
          variables:           
            区域: 第6区域          
            名称: 厨房           
            图标: mdi:countertop   
            温度: sensor.wendu_chufang    
            湿度: sensor.shidu_chufang    
            人体: sensor.renti_chufang             
            灯光:                
              - light.chufangdeng          
            设备:   
              - entity: sensor.chufang_dianfanbao  
                states: ['烹饪中','保温中','预约中']
              - entity: sensor.chufang_dianyaliguo
                states: ['烹饪中','保温中','预约中'] 
              - entity: sensor.chufang_zhengzhuguo
                states: ['烹饪中','保温中','预约中'] 
              - entity: sensor.chufang_kongqizhaguo 
                states: ['烹饪中','预约中']
              - entity: sensor.chufang_pobiji
                states: ['Busy','Keep Warm']   
              - entity: switch.180319907614846_power
                states: ['on']
              - entity: sensor.youyanji    
                states: ['>10']  
          custom_fields:  ## 如果没有或者不需要对应的弹出菜单，删除对应的引用 ##
            设备:
              card:    
                tap_action: !include "button卡片模板/表体区域弹出卡片/第6区域设备.yaml"
      第7区域:       
        card:                       
          type: custom:button-card    
          triggers_update: all       
          template: UI表体          
          variables:     
            区域: 第7区域         
            名称: 主卫  
            图标: mdi:shower 
            温度: sensor.wendu_zhuwei
            湿度: sensor.shidu_zhuwei
            人在: sensor.renzai_zhuwei
            灯光:     
              - light.yuba_zhuwei_deng
              - light.zhuweijingqiandeng
            设备: 
              - entity: 
                  - switch.yuba_zhuwei_blow
                  - switch.yuba_zhuwei_vent
                  - switch.yuba_zhuwei_heat1
                states: ['on']
          custom_fields:  ## 如果没有或者不需要对应的弹出菜单，删除对应的引用 ##
            设备:
              card:
                tap_action: !include "button卡片模板/表体区域弹出卡片/第7区域设备.yaml"
      第8区域:          
        card:         
          type: custom:button-card     
          triggers_update: all   
          template: UI表体            
          variables:     
            区域: 第8区域     
            名称: 公卫    
            图标: mdi:shower    
            温度: sensor.wendu_gongwei    
            湿度: sensor.shidu_gongwei  
            人在: sensor.renzai_gongwei 
            灯光:     
              - light.yuba_gongwei_deng 
              - light.gongweijingqiandeng 
            设备:   
              - entity:   
                  - switch.yuba_gongwei_blow
                  - switch.yuba_gongwei_vent 
                  - switch.yuba_gongwei_heat1  
                states: ['on'] 
              - entity: select.xiyiji   
                states: ['启动']       
          custom_fields:  ## 如果没有或者不需要对应的弹出菜单，删除对应的引用 ##
            设备:
              card:  
                tap_action: !include "button卡片模板/表体区域弹出卡片/第8区域设备.yaml" 
      表尾:           
        card:                    
          type: custom:xiaoshi-lunar-calendar-phone-date      
          theme: '[[[ return theme()]]]'
                              
       
 
